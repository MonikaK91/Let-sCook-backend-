{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\WA-projekt\\\\backend\",\"filename\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\WA-projekt\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _db = _interopRequireDefault(require(\"./db.js\"));\n\nvar _mongodb = _interopRequireWildcard(require(\"mongodb\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n_dotenv[\"default\"].config();\n\nvar app = (0, _express[\"default\"])(); // instanciranje aplikacije\n\nvar port = 3000; // port na kojem će web server slušati\n\napp.use((0, _cors[\"default\"])()); // omogući CORS na svim rutama\n\napp.use(_express[\"default\"].json()); //modul za dekodiranje JSON poruke\n//--------------- sve za recepte ---------------//\n//dohvat svih recepata i pretraga\n\napp.get(\"/recepti\", /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var db, query, selekcija, cursor, results;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context.sent;\n            //spajanje na bazu\n            query = req.query; //da bi dobili parametre\n\n            selekcija = {}; //radimo prazan objekt tako da ako korisnik ne pretražuje da vrati sve recepte\n\n            if (query.nazivRecepta) {\n              //RegExp koristimo da bi se pretraživana riječ tražila u cijelom nazivu recepta\n              //i unutar RegExp koristimo kako veličina slova ne bi igrala ulogu u pretraživanju\n              selekcija.nazivRecepta = new RegExp(query.nazivRecepta, \"i\");\n            }\n\n            console.log(\"Selekcija\", selekcija); //find metoda pretražuje dokumente u kolekciji\n\n            _context.next = 9;\n            return db.collection(\"recepti\").find(selekcija).sort({\n              objavljeno: -1\n            });\n\n          case 9:\n            cursor = _context.sent;\n            _context.next = 12;\n            return cursor.toArray();\n\n          case 12:\n            results = _context.sent;\n            res.json(results);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}()); //dohvat jednog recepta po id\n//id definira dinamičnu rutu\n//dinamična ruta je jer hendla sve moguće kombinacije id-jeva koji će doći ovdje\n\napp.get(\"/recepti/:id\", /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var id, db, ObjectId, doc;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            id = req.params.id; //ovako čitamo id iz url-a parametra\n\n            _context2.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context2.sent;\n            //spajamo se na bazu\n            ObjectId = require(\"mongodb\").ObjectId; //dodano jer je bacalo grešku za ObjectId\n            //findOne vraća prvi dokument na koji naiđe. Koji odgovora uvjetu.\n            //zato ne radi kursor. Nije potreban\n\n            _context2.next = 7;\n            return db.collection(\"recepti\").findOne({\n              _id: ObjectId(id)\n            });\n\n          case 7:\n            doc = _context2.sent;\n            res.json(doc);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}()); //brisanje određenog recepta i svih njegovih komentara\n\napp[\"delete\"](\"/recepti/:id\", /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var id, db, ObjectId, result, result2;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            id = req.params.id;\n            _context3.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context3.sent;\n            ObjectId = require(\"mongodb\").ObjectId;\n            _context3.next = 7;\n            return db.collection(\"recepti\").deleteOne({\n              _id: ObjectId(id)\n            });\n\n          case 7:\n            result = _context3.sent;\n\n            if (!(result && result.deletedCount == 1)) {\n              _context3.next = 15;\n              break;\n            }\n\n            _context3.next = 11;\n            return db.collection(\"comment\").deleteMany({\n              idRecepta: id\n            });\n\n          case 11:\n            result2 = _context3.sent;\n            res.json({\n              status: \"success\"\n            });\n            _context3.next = 16;\n            break;\n\n          case 15:\n            res.json({\n              status: \"fail\"\n            });\n\n          case 16:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}()); //funkcija checkAttributes provjerava atribute koje je unio korisnik\n\nvar checkAttributes = function checkAttributes(data) {\n  if (!data.slika || !data.nazivRecepta || !data.sastojci || !data.priprema || !data.težinaPripreme || !data.brojOsoba || !data.vrijemePripreme || !data.grupaJela || !data.kategorija) {\n    return false;\n  }\n\n  return true;\n}; //kreiranje novog recepta\n\n\napp.post(\"/recepti\", /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var data, check, db, result;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            data = req.body; //data su podaci sa frontenda\n\n            check = checkAttributes(data);\n\n            if (check) {\n              _context4.next = 5;\n              break;\n            }\n\n            res.json({\n              status: \"fail\",\n              reason: \"incomplete post\"\n            });\n            return _context4.abrupt(\"return\");\n\n          case 5:\n            _context4.next = 7;\n            return (0, _db[\"default\"])();\n\n          case 7:\n            db = _context4.sent;\n            _context4.next = 10;\n            return db.collection(\"recepti\").insertOne(data);\n\n          case 10:\n            result = _context4.sent;\n\n            //insertOne dodaje jedan dokument u kolekciju recepti\n            if (result) {\n              res.json({\n                status: \"success\"\n              });\n            } else {\n              res.json({\n                status: \"fail\"\n              });\n            }\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}()); //dohvat svih recepata po odabranom filteru\n\napp.get(\"/recepti/filter/:filter\", /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var filter, db, cursor, results;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            filter = req.params.filter;\n            _context5.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context5.sent;\n            _context5.next = 6;\n            return db.collection(\"recepti\").find({\n              $or: [{\n                kategorija: filter\n              }, {\n                grupaJela: filter\n              }]\n            }).sort({\n              objavljeno: -1\n            });\n\n          case 6:\n            cursor = _context5.sent;\n            _context5.next = 9;\n            return cursor.toArray();\n\n          case 9:\n            results = _context5.sent;\n            res.json(results);\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}()); //dohvat svih recepata određenog korisnika\n\napp.get(\"/recepti/korisnik/:korisnik\", /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var username, db, cursor, results;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            username = req.params.korisnik;\n            _context6.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context6.sent;\n            _context6.next = 6;\n            return db.collection(\"recepti\").find({\n              korisnik: username\n            }).sort({\n              objavljeno: -1\n            });\n\n          case 6:\n            cursor = _context6.sent;\n            _context6.next = 9;\n            return cursor.toArray();\n\n          case 9:\n            results = _context6.sent;\n            res.json(results);\n\n          case 11:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}()); //dohvat random recepta\n\napp.get(\"/recepti-slucajni\", /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var db, cursor, result, doc;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context7.sent;\n            cursor = db.collection(\"recepti\").aggregate([{\n              $sample: {\n                size: 1\n              }\n            }]);\n            _context7.next = 6;\n            return cursor.toArray();\n\n          case 6:\n            result = _context7.sent;\n            doc = result[0];\n            res.json(doc);\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x13, _x14) {\n    return _ref7.apply(this, arguments);\n  };\n}()); //dohvat recepta sa najviše komentara\n\napp.get(\"/recepti-popularni\", /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res) {\n    var db, cursor, result, ObjectId, doc;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context8.sent;\n            _context8.next = 5;\n            return db.collection(\"comment\").aggregate([{\n              //group - grupira komentare po id recepta kojem pripadaju te ih stavlja u polje _id\n              //sum - zbraja koliko puta se određeni recept pojavljuje te se rezultat stavlja u polje num\n              //sort - služi da sortirtamo rezultate silazno\n              //limit - služi da dobijemo id recepta koji ima najviše komentara\n              $group: {\n                _id: \"$idRecepta\",\n                num: {\n                  $sum: 1\n                }\n              }\n            }, {\n              $sort: {\n                num: -1\n              }\n            }, {\n              $limit: 1\n            }]);\n\n          case 5:\n            cursor = _context8.sent;\n            _context8.next = 8;\n            return cursor.toArray();\n\n          case 8:\n            result = _context8.sent;\n            ObjectId = require(\"mongodb\").ObjectId; //nakon što smo dobili id recepta koji ima najviše komentara\n            //pronalazimo ga u kolekciji recepti da dobijemo njegove podatke\n\n            _context8.next = 12;\n            return db.collection(\"recepti\").findOne({\n              _id: ObjectId(result[0]._id)\n            });\n\n          case 12:\n            doc = _context8.sent;\n            res.json(doc);\n\n          case 14:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function (_x15, _x16) {\n    return _ref8.apply(this, arguments);\n  };\n}()); //--------------- sve za komentare ---------------//\n//kreiranje novog komentara\n\napp.post(\"/recepti/:id/komentari\", /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(req, res) {\n    var data, db, result;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            data = req.body;\n            _context9.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context9.sent;\n            _context9.next = 6;\n            return db.collection(\"comment\").insertOne(data);\n\n          case 6:\n            result = _context9.sent;\n\n            if (result && result.acknowledged == true) {\n              console.log(result);\n              res.json({\n                status: \"success\"\n              });\n            } else {\n              res.json({\n                status: \"fail\"\n              });\n            }\n\n          case 8:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function (_x17, _x18) {\n    return _ref9.apply(this, arguments);\n  };\n}()); //dohvat svih komentara\n\napp.get(\"/recepti/:id/komentari\", /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(req, res) {\n    var id, db, cursor, results;\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            id = req.params.id;\n            _context10.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context10.sent;\n            _context10.next = 6;\n            return db.collection(\"comment\").find({\n              idRecepta: id\n            }).sort({\n              objavljeno: -1\n            });\n\n          case 6:\n            cursor = _context10.sent;\n            _context10.next = 9;\n            return cursor.toArray();\n\n          case 9:\n            results = _context10.sent;\n            res.json(results);\n\n          case 11:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n\n  return function (_x19, _x20) {\n    return _ref10.apply(this, arguments);\n  };\n}()); //brisanje određenog komentara\n\napp[\"delete\"](\"/recepti/komentari/:komentarid\", /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(req, res) {\n    var idkomentara, db, ObjectId, result;\n    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            idkomentara = req.params.komentarid;\n            _context11.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context11.sent;\n            ObjectId = require(\"mongodb\").ObjectId;\n            _context11.next = 7;\n            return db.collection(\"comment\").deleteOne({\n              _id: ObjectId(idkomentara)\n            });\n\n          case 7:\n            result = _context11.sent;\n\n            if (result && result.deletedCount == 1) {\n              res.json({\n                status: \"success\"\n              });\n            } else {\n              res.json({\n                status: \"fail\"\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n\n  return function (_x21, _x22) {\n    return _ref11.apply(this, arguments);\n  };\n}()); //mijenjanje određenog komentara\n\napp.patch(\"/recepti/komentari/:komentarid\", /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(req, res) {\n    var id, data, db, ObjectId, result;\n    return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            id = req.params.komentarid;\n            data = req.body;\n            delete data._id;\n            _context12.next = 5;\n            return (0, _db[\"default\"])();\n\n          case 5:\n            db = _context12.sent;\n            ObjectId = require(\"mongodb\").ObjectId;\n            _context12.next = 9;\n            return db.collection(\"comment\").updateOne({\n              _id: ObjectId(id)\n            }, {\n              $set: data\n            });\n\n          case 9:\n            result = _context12.sent;\n\n            if (result && result.modifiedCount == 1) {\n              console.log(result);\n              res.json({\n                status: \"success\"\n              });\n            } else {\n              res.json({\n                status: \"fail\"\n              });\n            }\n\n          case 11:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n\n  return function (_x23, _x24) {\n    return _ref12.apply(this, arguments);\n  };\n}()); //--------------- sve za prijavu i registraciju ---------------//\n//za registraciju\n\napp.post(\"/users\", /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(req, res) {\n    var user, id;\n    return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            //dohvaćamo korisnika iz podataka sa frontenda\n            user = req.body;\n            _context13.prev = 1;\n            _context13.next = 4;\n            return _auth[\"default\"].registerUser(user);\n\n          case 4:\n            id = _context13.sent;\n            _context13.next = 10;\n            break;\n\n          case 7:\n            _context13.prev = 7;\n            _context13.t0 = _context13[\"catch\"](1);\n            res.status(500).json({\n              error: _context13.t0.message\n            });\n\n          case 10:\n            res.json({\n              id: id\n            });\n\n          case 11:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13, null, [[1, 7]]);\n  }));\n\n  return function (_x25, _x26) {\n    return _ref13.apply(this, arguments);\n  };\n}()); //za prijavu\n\napp.post(\"/auth\", /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(req, res) {\n    var user, result;\n    return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            user = req.body;\n            _context14.prev = 1;\n            _context14.next = 4;\n            return _auth[\"default\"].authenticateUser(user.username, user.password);\n\n          case 4:\n            result = _context14.sent;\n            res.json(result);\n            _context14.next = 11;\n            break;\n\n          case 8:\n            _context14.prev = 8;\n            _context14.t0 = _context14[\"catch\"](1);\n            res.status(401).json({\n              erorr: _context14.t0.message\n            });\n\n          case 11:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14, null, [[1, 8]]);\n  }));\n\n  return function (_x27, _x28) {\n    return _ref14.apply(this, arguments);\n  };\n}()); //auth.verify je middleware funkcija. Izvršava se prije ostatka koda (tijela funkcije)\n\napp.get(\"/tajna\", [_auth[\"default\"].verify], function (req, res) {\n  res.json({\n    message: \"Ovo je tajna \" + req.jwt.username\n  });\n}); //promjena lozinke\n//auth.verify koristimo jer korisnik mora biti ulogiran\n\napp.patch(\"/users\", /*#__PURE__*/function () {\n  var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(req, res) {\n    var changes, result;\n    return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            //podaci koje je korisnik poslao s frontenda\n            changes = req.body; //dobivanje korisničkog imena od korisnika\n            //let username = req.jwt.username\n            //ako podaci sa frontenda imaju i staru i novu lozinku\n\n            if (!(changes.new_password && changes.old_password)) {\n              _context15.next = 8;\n              break;\n            }\n\n            _context15.next = 4;\n            return _auth[\"default\"].changeUserPassword(changes.korisnik, changes.old_password, changes.new_password);\n\n          case 4:\n            result = _context15.sent;\n\n            if (result) {\n              res.status(201).send();\n            } else {\n              res.status(500).json({\n                error: \"cannot change password\"\n              });\n            }\n\n            _context15.next = 9;\n            break;\n\n          case 8:\n            res.status(400).json({\n              error: \"Krivi upit\"\n            });\n\n          case 9:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n\n  return function (_x29, _x30) {\n    return _ref15.apply(this, arguments);\n  };\n}());\napp.listen(port, function () {\n  return console.log(\"Slu\\u0161am na portu \".concat(port, \"!\"));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJhcHAiLCJleHByZXNzIiwicG9ydCIsInVzZSIsImNvcnMiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwiY29ubmVjdCIsImRiIiwicXVlcnkiLCJzZWxla2NpamEiLCJuYXppdlJlY2VwdGEiLCJSZWdFeHAiLCJjb25zb2xlIiwibG9nIiwiY29sbGVjdGlvbiIsImZpbmQiLCJzb3J0Iiwib2JqYXZsamVubyIsImN1cnNvciIsInRvQXJyYXkiLCJyZXN1bHRzIiwiaWQiLCJwYXJhbXMiLCJPYmplY3RJZCIsInJlcXVpcmUiLCJmaW5kT25lIiwiX2lkIiwiZG9jIiwiZGVsZXRlT25lIiwicmVzdWx0IiwiZGVsZXRlZENvdW50IiwiZGVsZXRlTWFueSIsImlkUmVjZXB0YSIsInJlc3VsdDIiLCJzdGF0dXMiLCJjaGVja0F0dHJpYnV0ZXMiLCJkYXRhIiwic2xpa2EiLCJzYXN0b2pjaSIsInByaXByZW1hIiwidGXFvmluYVByaXByZW1lIiwiYnJvak9zb2JhIiwidnJpamVtZVByaXByZW1lIiwiZ3J1cGFKZWxhIiwia2F0ZWdvcmlqYSIsInBvc3QiLCJib2R5IiwiY2hlY2siLCJyZWFzb24iLCJpbnNlcnRPbmUiLCJmaWx0ZXIiLCIkb3IiLCJ1c2VybmFtZSIsImtvcmlzbmlrIiwiYWdncmVnYXRlIiwiJHNhbXBsZSIsInNpemUiLCIkZ3JvdXAiLCJudW0iLCIkc3VtIiwiJHNvcnQiLCIkbGltaXQiLCJhY2tub3dsZWRnZWQiLCJpZGtvbWVudGFyYSIsImtvbWVudGFyaWQiLCJwYXRjaCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJtb2RpZmllZENvdW50IiwidXNlciIsImF1dGgiLCJyZWdpc3RlclVzZXIiLCJlcnJvciIsIm1lc3NhZ2UiLCJhdXRoZW50aWNhdGVVc2VyIiwicGFzc3dvcmQiLCJlcm9yciIsInZlcmlmeSIsImp3dCIsImNoYW5nZXMiLCJuZXdfcGFzc3dvcmQiLCJvbGRfcGFzc3dvcmQiLCJjaGFuZ2VVc2VyUGFzc3dvcmQiLCJzZW5kIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcV0EtcHJvamVrdFxcYmFja2VuZFxcc3JjXFwiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5kb3RlbnYuY29uZmlnKCk7XHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gXCIuL2RiLmpzXCI7XHJcbmltcG9ydCBtb25nbywgeyBDb25uZWN0aW9uQ2xvc2VkRXZlbnQgfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5pbXBvcnQgYXV0aCBmcm9tIFwiLi9hdXRoLmpzXCI7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7IC8vIGluc3RhbmNpcmFuamUgYXBsaWthY2lqZVxyXG5jb25zdCBwb3J0ID0gMzAwMDsgLy8gcG9ydCBuYSBrb2plbSDEh2Ugd2ViIHNlcnZlciBzbHXFoWF0aVxyXG5cclxuYXBwLnVzZShjb3JzKCkpOyAvLyBvbW9ndcSHaSBDT1JTIG5hIHN2aW0gcnV0YW1hXHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpOyAvL21vZHVsIHphIGRla29kaXJhbmplIEpTT04gcG9ydWtlXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLSBzdmUgemEgcmVjZXB0ZSAtLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuLy9kb2h2YXQgc3ZpaCByZWNlcGF0YSBpIHByZXRyYWdhXHJcbmFwcC5nZXQoXCIvcmVjZXB0aVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7IC8vc3BhamFuamUgbmEgYmF6dVxyXG4gIGxldCBxdWVyeSA9IHJlcS5xdWVyeTsgLy9kYSBiaSBkb2JpbGkgcGFyYW1ldHJlXHJcbiAgbGV0IHNlbGVrY2lqYSA9IHt9OyAvL3JhZGltbyBwcmF6YW4gb2JqZWt0IHRha28gZGEgYWtvIGtvcmlzbmlrIG5lIHByZXRyYcW+dWplIGRhIHZyYXRpIHN2ZSByZWNlcHRlXHJcbiAgaWYgKHF1ZXJ5Lm5heml2UmVjZXB0YSkge1xyXG4gICAgLy9SZWdFeHAga29yaXN0aW1vIGRhIGJpIHNlIHByZXRyYcW+aXZhbmEgcmlqZcSNIHRyYcW+aWxhIHUgY2lqZWxvbSBuYXppdnUgcmVjZXB0YVxyXG4gICAgLy9pIHVudXRhciBSZWdFeHAga29yaXN0aW1vIGtha28gdmVsacSNaW5hIHNsb3ZhIG5lIGJpIGlncmFsYSB1bG9ndSB1IHByZXRyYcW+aXZhbmp1XHJcbiAgICBzZWxla2NpamEubmF6aXZSZWNlcHRhID0gbmV3IFJlZ0V4cChxdWVyeS5uYXppdlJlY2VwdGEsIFwiaVwiKTtcclxuICB9XHJcbiAgY29uc29sZS5sb2coXCJTZWxla2NpamFcIiwgc2VsZWtjaWphKTtcclxuXHJcbiAgLy9maW5kIG1ldG9kYSBwcmV0cmHFvnVqZSBkb2t1bWVudGUgdSBrb2xla2NpamlcclxuICBsZXQgY3Vyc29yID0gYXdhaXQgZGJcclxuICAgIC5jb2xsZWN0aW9uKFwicmVjZXB0aVwiKVxyXG4gICAgLmZpbmQoc2VsZWtjaWphKVxyXG4gICAgLnNvcnQoeyBvYmphdmxqZW5vOiAtMSB9KTtcclxuICAvL3JlenVsdGF0aSBzZSBkb2h2YcSHYWp1IHBvbW/Eh3Uga3Vyc29yYVxyXG4gIC8vdG9BcnJheSgpIHN2ZSBkb2t1bWVudGUgcG9kIGt1cnNvcm9tIHByZXR2YXJhIHUgbGlzdHUgb2JqZWthdGFcclxuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbiAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgamVkbm9nIHJlY2VwdGEgcG8gaWRcclxuLy9pZCBkZWZpbmlyYSBkaW5hbWnEjW51IHJ1dHVcclxuLy9kaW5hbWnEjW5hIHJ1dGEgamUgamVyIGhlbmRsYSBzdmUgbW9ndcSHZSBrb21iaW5hY2lqZSBpZC1qZXZhIGtvamkgxIdlIGRvxIdpIG92ZGplXHJcbmFwcC5nZXQoXCIvcmVjZXB0aS86aWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDsgLy9vdmFrbyDEjWl0YW1vIGlkIGl6IHVybC1hIHBhcmFtZXRyYVxyXG4gIGxldCBkYiA9IGF3YWl0IGNvbm5lY3QoKTsgLy9zcGFqYW1vIHNlIG5hIGJhenVcclxuICB2YXIgT2JqZWN0SWQgPSByZXF1aXJlKFwibW9uZ29kYlwiKS5PYmplY3RJZDsgLy9kb2Rhbm8gamVyIGplIGJhY2FsbyBncmXFoWt1IHphIE9iamVjdElkXHJcbiAgLy9maW5kT25lIHZyYcSHYSBwcnZpIGRva3VtZW50IG5hIGtvamkgbmFpxJFlLiBLb2ppIG9kZ292b3JhIHV2amV0dS5cclxuICAvL3phdG8gbmUgcmFkaSBrdXJzb3IuIE5pamUgcG90cmViYW5cclxuICBsZXQgZG9jID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInJlY2VwdGlcIikuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQoaWQpIH0pO1xyXG4gIHJlcy5qc29uKGRvYyk7XHJcbn0pO1xyXG5cclxuLy9icmlzYW5qZSBvZHJlxJFlbm9nIHJlY2VwdGEgaSBzdmloIG5qZWdvdmloIGtvbWVudGFyYVxyXG5hcHAuZGVsZXRlKFwiL3JlY2VwdGkvOmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGxldCBpZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xyXG4gIHZhciBPYmplY3RJZCA9IHJlcXVpcmUoXCJtb25nb2RiXCIpLk9iamVjdElkO1xyXG4gIGxldCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwicmVjZXB0aVwiKS5kZWxldGVPbmUoeyBfaWQ6IE9iamVjdElkKGlkKSB9KTtcclxuICBpZiAocmVzdWx0ICYmIHJlc3VsdC5kZWxldGVkQ291bnQgPT0gMSkge1xyXG4gICAgbGV0IHJlc3VsdDIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY29tbWVudFwiKS5kZWxldGVNYW55KHsgaWRSZWNlcHRhOiBpZCB9KTtcclxuICAgIHJlcy5qc29uKHsgc3RhdHVzOiBcInN1Y2Nlc3NcIiB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLmpzb24oeyBzdGF0dXM6IFwiZmFpbFwiIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vL2Z1bmtjaWphIGNoZWNrQXR0cmlidXRlcyBwcm92amVyYXZhIGF0cmlidXRlIGtvamUgamUgdW5pbyBrb3Jpc25pa1xyXG5sZXQgY2hlY2tBdHRyaWJ1dGVzID0gKGRhdGEpID0+IHtcclxuICBpZiAoXHJcbiAgICAhZGF0YS5zbGlrYSB8fFxyXG4gICAgIWRhdGEubmF6aXZSZWNlcHRhIHx8XHJcbiAgICAhZGF0YS5zYXN0b2pjaSB8fFxyXG4gICAgIWRhdGEucHJpcHJlbWEgfHxcclxuICAgICFkYXRhLnRlxb5pbmFQcmlwcmVtZSB8fFxyXG4gICAgIWRhdGEuYnJvak9zb2JhIHx8XHJcbiAgICAhZGF0YS52cmlqZW1lUHJpcHJlbWUgfHxcclxuICAgICFkYXRhLmdydXBhSmVsYSB8fFxyXG4gICAgIWRhdGEua2F0ZWdvcmlqYVxyXG4gICkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbi8va3JlaXJhbmplIG5vdm9nIHJlY2VwdGFcclxuYXBwLnBvc3QoXCIvcmVjZXB0aVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBsZXQgZGF0YSA9IHJlcS5ib2R5OyAvL2RhdGEgc3UgcG9kYWNpIHNhIGZyb250ZW5kYVxyXG4gIGxldCBjaGVjayA9IGNoZWNrQXR0cmlidXRlcyhkYXRhKTtcclxuICBpZiAoIWNoZWNrKSB7XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN0YXR1czogXCJmYWlsXCIsXHJcbiAgICAgIHJlYXNvbjogXCJpbmNvbXBsZXRlIHBvc3RcIixcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJyZWNlcHRpXCIpLmluc2VydE9uZShkYXRhKTsgLy9pbnNlcnRPbmUgZG9kYWplIGplZGFuIGRva3VtZW50IHUga29sZWtjaWp1IHJlY2VwdGlcclxuICBpZiAocmVzdWx0KSB7XHJcbiAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5qc29uKHsgc3RhdHVzOiBcImZhaWxcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgc3ZpaCByZWNlcGF0YSBwbyBvZGFicmFub20gZmlsdGVydVxyXG5hcHAuZ2V0KFwiL3JlY2VwdGkvZmlsdGVyLzpmaWx0ZXJcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgbGV0IGZpbHRlciA9IHJlcS5wYXJhbXMuZmlsdGVyO1xyXG4gIGxldCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcclxuICAvL3RyYcW+aSByZWNlcHRlIGlsaSBwbyBrYXRlZ29yaWppIGlsaSBwbyBncnVwaSBqZWxhXHJcbiAgbGV0IGN1cnNvciA9IGF3YWl0IGRiXHJcbiAgICAuY29sbGVjdGlvbihcInJlY2VwdGlcIilcclxuICAgIC5maW5kKHsgJG9yOiBbeyBrYXRlZ29yaWphOiBmaWx0ZXIgfSwgeyBncnVwYUplbGE6IGZpbHRlciB9XSB9KVxyXG4gICAgLnNvcnQoeyBvYmphdmxqZW5vOiAtMSB9KTtcclxuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbiAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgc3ZpaCByZWNlcGF0YSBvZHJlxJFlbm9nIGtvcmlzbmlrYVxyXG5hcHAuZ2V0KFwiL3JlY2VwdGkva29yaXNuaWsvOmtvcmlzbmlrXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGxldCB1c2VybmFtZSA9IHJlcS5wYXJhbXMua29yaXNuaWs7XHJcbiAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xyXG4gIGxldCBjdXJzb3IgPSBhd2FpdCBkYlxyXG4gICAgLmNvbGxlY3Rpb24oXCJyZWNlcHRpXCIpXHJcbiAgICAuZmluZCh7IGtvcmlzbmlrOiB1c2VybmFtZSB9KVxyXG4gICAgLnNvcnQoeyBvYmphdmxqZW5vOiAtMSB9KTtcclxuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbiAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgcmFuZG9tIHJlY2VwdGFcclxuYXBwLmdldChcIi9yZWNlcHRpLXNsdWNham5pXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGxldCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcclxuICBsZXQgY3Vyc29yID0gZGIuY29sbGVjdGlvbihcInJlY2VwdGlcIikuYWdncmVnYXRlKFt7ICRzYW1wbGU6IHsgc2l6ZTogMSB9IH1dKTtcclxuICBsZXQgcmVzdWx0ID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcclxuICBsZXQgZG9jID0gcmVzdWx0WzBdO1xyXG4gIHJlcy5qc29uKGRvYyk7XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgcmVjZXB0YSBzYSBuYWp2acWhZSBrb21lbnRhcmFcclxuYXBwLmdldChcIi9yZWNlcHRpLXBvcHVsYXJuaVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgbGV0IGN1cnNvciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjb21tZW50XCIpLmFnZ3JlZ2F0ZShbXHJcbiAgICB7XHJcbiAgICAgIC8vZ3JvdXAgLSBncnVwaXJhIGtvbWVudGFyZSBwbyBpZCByZWNlcHRhIGtvamVtIHByaXBhZGFqdSB0ZSBpaCBzdGF2bGphIHUgcG9samUgX2lkXHJcbiAgICAgIC8vc3VtIC0gemJyYWphIGtvbGlrbyBwdXRhIHNlIG9kcmXEkWVuaSByZWNlcHQgcG9qYXZsanVqZSB0ZSBzZSByZXp1bHRhdCBzdGF2bGphIHUgcG9samUgbnVtXHJcbiAgICAgIC8vc29ydCAtIHNsdcW+aSBkYSBzb3J0aXJ0YW1vIHJlenVsdGF0ZSBzaWxhem5vXHJcbiAgICAgIC8vbGltaXQgLSBzbHXFvmkgZGEgZG9iaWplbW8gaWQgcmVjZXB0YSBrb2ppIGltYSBuYWp2acWhZSBrb21lbnRhcmFcclxuICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgX2lkOiBcIiRpZFJlY2VwdGFcIixcclxuICAgICAgICBudW06IHtcclxuICAgICAgICAgICRzdW06IDEsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICRzb3J0OiB7XHJcbiAgICAgICAgbnVtOiAtMSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICRsaW1pdDogMSxcclxuICAgIH0sXHJcbiAgXSk7XHJcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcblxyXG4gIHZhciBPYmplY3RJZCA9IHJlcXVpcmUoXCJtb25nb2RiXCIpLk9iamVjdElkO1xyXG4gIC8vbmFrb24gxaF0byBzbW8gZG9iaWxpIGlkIHJlY2VwdGEga29qaSBpbWEgbmFqdmnFoWUga29tZW50YXJhXHJcbiAgLy9wcm9uYWxhemltbyBnYSB1IGtvbGVrY2lqaSByZWNlcHRpIGRhIGRvYmlqZW1vIG5qZWdvdmUgcG9kYXRrZVxyXG4gIGxldCBkb2MgPSBhd2FpdCBkYlxyXG4gICAgLmNvbGxlY3Rpb24oXCJyZWNlcHRpXCIpXHJcbiAgICAuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQocmVzdWx0WzBdLl9pZCkgfSk7XHJcbiAgcmVzLmpzb24oZG9jKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLSBzdmUgemEga29tZW50YXJlIC0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4vL2tyZWlyYW5qZSBub3ZvZyBrb21lbnRhcmFcclxuYXBwLnBvc3QoXCIvcmVjZXB0aS86aWQva29tZW50YXJpXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGxldCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xyXG4gIGxldCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY29tbWVudFwiKS5pbnNlcnRPbmUoZGF0YSk7XHJcbiAgaWYgKHJlc3VsdCAmJiByZXN1bHQuYWNrbm93bGVkZ2VkID09IHRydWUpIHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5qc29uKHsgc3RhdHVzOiBcImZhaWxcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy9kb2h2YXQgc3ZpaCBrb21lbnRhcmFcclxuYXBwLmdldChcIi9yZWNlcHRpLzppZC9rb21lbnRhcmlcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDtcclxuICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgbGV0IGN1cnNvciA9IGF3YWl0IGRiXHJcbiAgICAuY29sbGVjdGlvbihcImNvbW1lbnRcIilcclxuICAgIC5maW5kKHsgaWRSZWNlcHRhOiBpZCB9KVxyXG4gICAgLnNvcnQoeyBvYmphdmxqZW5vOiAtMSB9KTtcclxuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbiAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbn0pO1xyXG5cclxuLy9icmlzYW5qZSBvZHJlxJFlbm9nIGtvbWVudGFyYVxyXG5hcHAuZGVsZXRlKFwiL3JlY2VwdGkva29tZW50YXJpLzprb21lbnRhcmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGxldCBpZGtvbWVudGFyYSA9IHJlcS5wYXJhbXMua29tZW50YXJpZDtcclxuICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgdmFyIE9iamVjdElkID0gcmVxdWlyZShcIm1vbmdvZGJcIikuT2JqZWN0SWQ7XHJcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGRiXHJcbiAgICAuY29sbGVjdGlvbihcImNvbW1lbnRcIilcclxuICAgIC5kZWxldGVPbmUoeyBfaWQ6IE9iamVjdElkKGlka29tZW50YXJhKSB9KTtcclxuICBpZiAocmVzdWx0ICYmIHJlc3VsdC5kZWxldGVkQ291bnQgPT0gMSkge1xyXG4gICAgcmVzLmpzb24oeyBzdGF0dXM6IFwic3VjY2Vzc1wiIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuanNvbih7IHN0YXR1czogXCJmYWlsXCIgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vbWlqZW5qYW5qZSBvZHJlxJFlbm9nIGtvbWVudGFyYVxyXG5hcHAucGF0Y2goXCIvcmVjZXB0aS9rb21lbnRhcmkvOmtvbWVudGFyaWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgbGV0IGlkID0gcmVxLnBhcmFtcy5rb21lbnRhcmlkO1xyXG4gIGxldCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgZGVsZXRlIGRhdGEuX2lkO1xyXG4gIGxldCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcclxuICB2YXIgT2JqZWN0SWQgPSByZXF1aXJlKFwibW9uZ29kYlwiKS5PYmplY3RJZDtcclxuICBsZXQgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgIC5jb2xsZWN0aW9uKFwiY29tbWVudFwiKVxyXG4gICAgLnVwZGF0ZU9uZSh7IF9pZDogT2JqZWN0SWQoaWQpIH0sIHsgJHNldDogZGF0YSB9KTtcclxuICBpZiAocmVzdWx0ICYmIHJlc3VsdC5tb2RpZmllZENvdW50ID09IDEpIHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5qc29uKHsgc3RhdHVzOiBcImZhaWxcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0gc3ZlIHphIHByaWphdnUgaSByZWdpc3RyYWNpanUgLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbi8vemEgcmVnaXN0cmFjaWp1XHJcbmFwcC5wb3N0KFwiL3VzZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIC8vZG9odmHEh2FtbyBrb3Jpc25pa2EgaXogcG9kYXRha2Egc2EgZnJvbnRlbmRhXHJcbiAgbGV0IHVzZXIgPSByZXEuYm9keTtcclxuICBsZXQgaWQ7XHJcbiAgdHJ5IHtcclxuICAgIGlkID0gYXdhaXQgYXV0aC5yZWdpc3RlclVzZXIodXNlcik7IC8vcG96aXYgZnVua2NpamUgaXogYXV0aC5qc1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGUubWVzc2FnZSB9KTtcclxuICB9XHJcbiAgcmVzLmpzb24oeyBpZDogaWQgfSk7XHJcbn0pO1xyXG5cclxuLy96YSBwcmlqYXZ1XHJcbmFwcC5wb3N0KFwiL2F1dGhcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgbGV0IHVzZXIgPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vcG96aXYgZnVua2NpamUgc2EgcG9kYWNpbWEga29qaSBzdSBkb8WhbGkgc2EgZnJvbnRlbmRhXHJcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYXV0aC5hdXRoZW50aWNhdGVVc2VyKHVzZXIudXNlcm5hbWUsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgcmVzLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVyb3JyOiBlLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vYXV0aC52ZXJpZnkgamUgbWlkZGxld2FyZSBmdW5rY2lqYS4gSXp2csWhYXZhIHNlIHByaWplIG9zdGF0a2Ega29kYSAodGlqZWxhIGZ1bmtjaWplKVxyXG5hcHAuZ2V0KFwiL3Rham5hXCIsIFthdXRoLnZlcmlmeV0sIChyZXEsIHJlcykgPT4ge1xyXG4gIHJlcy5qc29uKHsgbWVzc2FnZTogXCJPdm8gamUgdGFqbmEgXCIgKyByZXEuand0LnVzZXJuYW1lIH0pO1xyXG59KTtcclxuXHJcbi8vcHJvbWplbmEgbG96aW5rZVxyXG4vL2F1dGgudmVyaWZ5IGtvcmlzdGltbyBqZXIga29yaXNuaWsgbW9yYSBiaXRpIHVsb2dpcmFuXHJcbmFwcC5wYXRjaChcIi91c2Vyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAvL3BvZGFjaSBrb2plIGplIGtvcmlzbmlrIHBvc2xhbyBzIGZyb250ZW5kYVxyXG4gIGxldCBjaGFuZ2VzID0gcmVxLmJvZHk7XHJcbiAgLy9kb2JpdmFuamUga29yaXNuacSNa29nIGltZW5hIG9kIGtvcmlzbmlrYVxyXG4gIC8vbGV0IHVzZXJuYW1lID0gcmVxLmp3dC51c2VybmFtZVxyXG4gIC8vYWtvIHBvZGFjaSBzYSBmcm9udGVuZGEgaW1hanUgaSBzdGFydSBpIG5vdnUgbG96aW5rdVxyXG4gIGlmIChjaGFuZ2VzLm5ld19wYXNzd29yZCAmJiBjaGFuZ2VzLm9sZF9wYXNzd29yZCkge1xyXG4gICAgLy9wb3ppdiBmdW5rY2lqZSB0ZSBzcHJlbWFuamUgcG9kYXRha2FcclxuICAgIGxldCByZXN1bHQgPSBhd2FpdCBhdXRoLmNoYW5nZVVzZXJQYXNzd29yZChcclxuICAgICAgY2hhbmdlcy5rb3Jpc25payxcclxuICAgICAgY2hhbmdlcy5vbGRfcGFzc3dvcmQsXHJcbiAgICAgIGNoYW5nZXMubmV3X3Bhc3N3b3JkXHJcbiAgICApO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJjYW5ub3QgY2hhbmdlIHBhc3N3b3JkXCIgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiS3JpdmkgdXBpdFwiIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IGNvbnNvbGUubG9nKGBTbHXFoWFtIG5hIHBvcnR1ICR7cG9ydH0hYCkpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7K0NBTEEsb0o7Ozs7OztBQUFBQSxrQkFBQSxDQUFPQyxNQUFQOztBQU9BLElBQU1DLEdBQUcsR0FBRyxJQUFBQyxtQkFBQSxHQUFaLEMsQ0FBdUI7O0FBQ3ZCLElBQU1DLElBQUksR0FBRyxJQUFiLEMsQ0FBbUI7O0FBRW5CRixHQUFHLENBQUNHLEdBQUosQ0FBUSxJQUFBQyxnQkFBQSxHQUFSLEUsQ0FBaUI7O0FBQ2pCSixHQUFHLENBQUNHLEdBQUosQ0FBUUYsbUJBQUEsQ0FBUUksSUFBUixFQUFSLEUsQ0FBeUI7QUFFekI7QUFFQTs7QUFDQUwsR0FBRyxDQUFDTSxHQUFKLENBQVEsVUFBUjtFQUFBLHNFQUFvQixpQkFBT0MsR0FBUCxFQUFZQyxHQUFaO0lBQUE7SUFBQTtNQUFBO1FBQUE7VUFBQTtZQUFBO1lBQUEsT0FDSCxJQUFBQyxjQUFBLEdBREc7O1VBQUE7WUFDZEMsRUFEYztZQUNRO1lBQ3RCQyxLQUZjLEdBRU5KLEdBQUcsQ0FBQ0ksS0FGRSxFQUVLOztZQUNuQkMsU0FIYyxHQUdGLEVBSEUsRUFHRTs7WUFDcEIsSUFBSUQsS0FBSyxDQUFDRSxZQUFWLEVBQXdCO2NBQ3RCO2NBQ0E7Y0FDQUQsU0FBUyxDQUFDQyxZQUFWLEdBQXlCLElBQUlDLE1BQUosQ0FBV0gsS0FBSyxDQUFDRSxZQUFqQixFQUErQixHQUEvQixDQUF6QjtZQUNEOztZQUNERSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxXQUFaLEVBQXlCSixTQUF6QixFQVRrQixDQVdsQjs7WUFYa0I7WUFBQSxPQVlDRixFQUFFLENBQ2xCTyxVQURnQixDQUNMLFNBREssRUFFaEJDLElBRmdCLENBRVhOLFNBRlcsRUFH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","map":{"version":3,"names":["dotenv","config","app","express","port","use","cors","json","get","req","res","connect","db","query","selekcija","nazivRecepta","RegExp","console","log","collection","find","sort","objavljeno","cursor","toArray","results","id","params","ObjectId","require","findOne","_id","doc","deleteOne","result","deletedCount","deleteMany","idRecepta","result2","status","checkAttributes","data","slika","sastojci","priprema","težinaPripreme","brojOsoba","vrijemePripreme","grupaJela","kategorija","post","body","check","reason","insertOne","filter","$or","username","korisnik","aggregate","$sample","size","$group","num","$sum","$sort","$limit","acknowledged","idkomentara","komentarid","patch","updateOne","$set","modifiedCount","user","auth","registerUser","error","message","authenticateUser","password","erorr","verify","jwt","changes","new_password","old_password","changeUserPassword","send","listen"],"sourceRoot":"C:\\WA-projekt\\backend\\src\\","sources":["index.js"],"sourcesContent":["import dotenv from \"dotenv\";\r\ndotenv.config();\r\nimport express from \"express\";\r\nimport cors from \"cors\";\r\nimport connect from \"./db.js\";\r\nimport mongo, { ConnectionClosedEvent } from \"mongodb\";\r\nimport auth from \"./auth.js\";\r\n\r\nconst app = express(); // instanciranje aplikacije\r\nconst port = 3000; // port na kojem će web server slušati\r\n\r\napp.use(cors()); // omogući CORS na svim rutama\r\napp.use(express.json()); //modul za dekodiranje JSON poruke\r\n\r\n//--------------- sve za recepte ---------------//\r\n\r\n//dohvat svih recepata i pretraga\r\napp.get(\"/recepti\", async (req, res) => {\r\n  let db = await connect(); //spajanje na bazu\r\n  let query = req.query; //da bi dobili parametre\r\n  let selekcija = {}; //radimo prazan objekt tako da ako korisnik ne pretražuje da vrati sve recepte\r\n  if (query.nazivRecepta) {\r\n    //RegExp koristimo da bi se pretraživana riječ tražila u cijelom nazivu recepta\r\n    //i unutar RegExp koristimo kako veličina slova ne bi igrala ulogu u pretraživanju\r\n    selekcija.nazivRecepta = new RegExp(query.nazivRecepta, \"i\");\r\n  }\r\n  console.log(\"Selekcija\", selekcija);\r\n\r\n  //find metoda pretražuje dokumente u kolekciji\r\n  let cursor = await db\r\n    .collection(\"recepti\")\r\n    .find(selekcija)\r\n    .sort({ objavljeno: -1 });\r\n  //rezultati se dohvaćaju pomoću kursora\r\n  //toArray() sve dokumente pod kursorom pretvara u listu objekata\r\n  let results = await cursor.toArray();\r\n  res.json(results);\r\n});\r\n\r\n//dohvat jednog recepta po id\r\n//id definira dinamičnu rutu\r\n//dinamična ruta je jer hendla sve moguće kombinacije id-jeva koji će doći ovdje\r\napp.get(\"/recepti/:id\", async (req, res) => {\r\n  let id = req.params.id; //ovako čitamo id iz url-a parametra\r\n  let db = await connect(); //spajamo se na bazu\r\n  var ObjectId = require(\"mongodb\").ObjectId; //dodano jer je bacalo grešku za ObjectId\r\n  //findOne vraća prvi dokument na koji naiđe. Koji odgovora uvjetu.\r\n  //zato ne radi kursor. Nije potreban\r\n  let doc = await db.collection(\"recepti\").findOne({ _id: ObjectId(id) });\r\n  res.json(doc);\r\n});\r\n\r\n//brisanje određenog recepta i svih njegovih komentara\r\napp.delete(\"/recepti/:id\", async (req, res) => {\r\n  let id = req.params.id;\r\n  let db = await connect();\r\n  var ObjectId = require(\"mongodb\").ObjectId;\r\n  let result = await db.collection(\"recepti\").deleteOne({ _id: ObjectId(id) });\r\n  if (result && result.deletedCount == 1) {\r\n    let result2 = await db.collection(\"comment\").deleteMany({ idRecepta: id });\r\n    res.json({ status: \"success\" });\r\n  } else {\r\n    res.json({ status: \"fail\" });\r\n  }\r\n});\r\n\r\n//funkcija checkAttributes provjerava atribute koje je unio korisnik\r\nlet checkAttributes = (data) => {\r\n  if (\r\n    !data.slika ||\r\n    !data.nazivRecepta ||\r\n    !data.sastojci ||\r\n    !data.priprema ||\r\n    !data.težinaPripreme ||\r\n    !data.brojOsoba ||\r\n    !data.vrijemePripreme ||\r\n    !data.grupaJela ||\r\n    !data.kategorija\r\n  ) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n//kreiranje novog recepta\r\napp.post(\"/recepti\", async (req, res) => {\r\n  let data = req.body; //data su podaci sa frontenda\r\n  let check = checkAttributes(data);\r\n  if (!check) {\r\n    res.json({\r\n      status: \"fail\",\r\n      reason: \"incomplete post\",\r\n    });\r\n    return;\r\n  }\r\n  let db = await connect();\r\n  let result = await db.collection(\"recepti\").insertOne(data); //insertOne dodaje jedan dokument u kolekciju recepti\r\n  if (result) {\r\n    res.json({ status: \"success\" });\r\n  } else {\r\n    res.json({ status: \"fail\" });\r\n  }\r\n});\r\n\r\n//dohvat svih recepata po odabranom filteru\r\napp.get(\"/recepti/filter/:filter\", async (req, res) => {\r\n  let filter = req.params.filter;\r\n  let db = await connect();\r\n  //traži recepte ili po kategoriji ili po grupi jela\r\n  let cursor = await db\r\n    .collection(\"recepti\")\r\n    .find({ $or: [{ kategorija: filter }, { grupaJela: filter }] })\r\n    .sort({ objavljeno: -1 });\r\n  let results = await cursor.toArray();\r\n  res.json(results);\r\n});\r\n\r\n//dohvat svih recepata određenog korisnika\r\napp.get(\"/recepti/korisnik/:korisnik\", async (req, res) => {\r\n  let username = req.params.korisnik;\r\n  let db = await connect();\r\n  let cursor = await db\r\n    .collection(\"recepti\")\r\n    .find({ korisnik: username })\r\n    .sort({ objavljeno: -1 });\r\n  let results = await cursor.toArray();\r\n  res.json(results);\r\n});\r\n\r\n//dohvat random recepta\r\napp.get(\"/recepti-slucajni\", async (req, res) => {\r\n  let db = await connect();\r\n  let cursor = db.collection(\"recepti\").aggregate([{ $sample: { size: 1 } }]);\r\n  let result = await cursor.toArray();\r\n  let doc = result[0];\r\n  res.json(doc);\r\n});\r\n\r\n//dohvat recepta sa najviše komentara\r\napp.get(\"/recepti-popularni\", async (req, res) => {\r\n  let db = await connect();\r\n  let cursor = await db.collection(\"comment\").aggregate([\r\n    {\r\n      //group - grupira komentare po id recepta kojem pripadaju te ih stavlja u polje _id\r\n      //sum - zbraja koliko puta se određeni recept pojavljuje te se rezultat stavlja u polje num\r\n      //sort - služi da sortirtamo rezultate silazno\r\n      //limit - služi da dobijemo id recepta koji ima najviše komentara\r\n      $group: {\r\n        _id: \"$idRecepta\",\r\n        num: {\r\n          $sum: 1,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      $sort: {\r\n        num: -1,\r\n      },\r\n    },\r\n    {\r\n      $limit: 1,\r\n    },\r\n  ]);\r\n  let result = await cursor.toArray();\r\n\r\n  var ObjectId = require(\"mongodb\").ObjectId;\r\n  //nakon što smo dobili id recepta koji ima najviše komentara\r\n  //pronalazimo ga u kolekciji recepti da dobijemo njegove podatke\r\n  let doc = await db\r\n    .collection(\"recepti\")\r\n    .findOne({ _id: ObjectId(result[0]._id) });\r\n  res.json(doc);\r\n});\r\n\r\n//--------------- sve za komentare ---------------//\r\n\r\n//kreiranje novog komentara\r\napp.post(\"/recepti/:id/komentari\", async (req, res) => {\r\n  let data = req.body;\r\n  let db = await connect();\r\n  let result = await db.collection(\"comment\").insertOne(data);\r\n  if (result && result.acknowledged == true) {\r\n    console.log(result);\r\n    res.json({ status: \"success\" });\r\n  } else {\r\n    res.json({ status: \"fail\" });\r\n  }\r\n});\r\n\r\n//dohvat svih komentara\r\napp.get(\"/recepti/:id/komentari\", async (req, res) => {\r\n  let id = req.params.id;\r\n  let db = await connect();\r\n  let cursor = await db\r\n    .collection(\"comment\")\r\n    .find({ idRecepta: id })\r\n    .sort({ objavljeno: -1 });\r\n  let results = await cursor.toArray();\r\n  res.json(results);\r\n});\r\n\r\n//brisanje određenog komentara\r\napp.delete(\"/recepti/komentari/:komentarid\", async (req, res) => {\r\n  let idkomentara = req.params.komentarid;\r\n  let db = await connect();\r\n  var ObjectId = require(\"mongodb\").ObjectId;\r\n  let result = await db\r\n    .collection(\"comment\")\r\n    .deleteOne({ _id: ObjectId(idkomentara) });\r\n  if (result && result.deletedCount == 1) {\r\n    res.json({ status: \"success\" });\r\n  } else {\r\n    res.json({ status: \"fail\" });\r\n  }\r\n});\r\n\r\n//mijenjanje određenog komentara\r\napp.patch(\"/recepti/komentari/:komentarid\", async (req, res) => {\r\n  let id = req.params.komentarid;\r\n  let data = req.body;\r\n  delete data._id;\r\n  let db = await connect();\r\n  var ObjectId = require(\"mongodb\").ObjectId;\r\n  let result = await db\r\n    .collection(\"comment\")\r\n    .updateOne({ _id: ObjectId(id) }, { $set: data });\r\n  if (result && result.modifiedCount == 1) {\r\n    console.log(result);\r\n    res.json({ status: \"success\" });\r\n  } else {\r\n    res.json({ status: \"fail\" });\r\n  }\r\n});\r\n\r\n//--------------- sve za prijavu i registraciju ---------------//\r\n\r\n//za registraciju\r\napp.post(\"/users\", async (req, res) => {\r\n  //dohvaćamo korisnika iz podataka sa frontenda\r\n  let user = req.body;\r\n  let id;\r\n  try {\r\n    id = await auth.registerUser(user); //poziv funkcije iz auth.js\r\n  } catch (e) {\r\n    res.status(500).json({ error: e.message });\r\n  }\r\n  res.json({ id: id });\r\n});\r\n\r\n//za prijavu\r\napp.post(\"/auth\", async (req, res) => {\r\n  let user = req.body;\r\n\r\n  try {\r\n    //poziv funkcije sa podacima koji su došli sa frontenda\r\n    let result = await auth.authenticateUser(user.username, user.password);\r\n    res.json(result);\r\n  } catch (e) {\r\n    res.status(401).json({ erorr: e.message });\r\n  }\r\n});\r\n\r\n//auth.verify je middleware funkcija. Izvršava se prije ostatka koda (tijela funkcije)\r\napp.get(\"/tajna\", [auth.verify], (req, res) => {\r\n  res.json({ message: \"Ovo je tajna \" + req.jwt.username });\r\n});\r\n\r\n//promjena lozinke\r\n//auth.verify koristimo jer korisnik mora biti ulogiran\r\napp.patch(\"/users\", async (req, res) => {\r\n  //podaci koje je korisnik poslao s frontenda\r\n  let changes = req.body;\r\n  //dobivanje korisničkog imena od korisnika\r\n  //let username = req.jwt.username\r\n  //ako podaci sa frontenda imaju i staru i novu lozinku\r\n  if (changes.new_password && changes.old_password) {\r\n    //poziv funkcije te spremanje podataka\r\n    let result = await auth.changeUserPassword(\r\n      changes.korisnik,\r\n      changes.old_password,\r\n      changes.new_password\r\n    );\r\n    if (result) {\r\n      res.status(201).send();\r\n    } else {\r\n      res.status(500).json({ error: \"cannot change password\" });\r\n    }\r\n  } else {\r\n    res.status(400).json({ error: \"Krivi upit\" });\r\n  }\r\n});\r\n\r\napp.listen(port, () => console.log(`Slušam na portu ${port}!`));\r\n"],"mappings":"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"}},"mtime":1663168393137},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\WA-projekt\\\\backend\",\"filename\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\memory_storage.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\WA-projekt\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar storage = {\n  recepti: [{\n    id: 1,\n    slika: \"https://picsum.photos/id/123/500/500\",\n    nazivRecepta: \"Rezanci od tikvica s češnjakom i parmezanom\",\n    sastojci: [{\n      sastojak: \"tikvica\",\n      kolicina: 3,\n      mjera: \"komada\"\n    }, {\n      sastojak: \"maslac\",\n      kolicina: 2,\n      mjera: \"žličice\"\n    }, {\n      sastojak: \"češnjak\",\n      kolicina: 2,\n      mjera: \"režnja\"\n    }, {\n      sastojak: \"parmezan\",\n      kolicina: 50,\n      mjera: \"grama\"\n    }],\n    priprema: \"Tikvice nareži na tanke rezance. Zagrij veliku tavu na srednje jakoj vatri. Rastopi maslac pa dodaj češnjak. Pirjaj kratko češnjak dok ne zamiriše (1-2 minute). Pazi da češnjak ne zagori. Dodaj tikvice naribane na rezance i naribani parmezan te sol i papar po ukusu. Pirjaj 1-2 minute ili dok rezanci ne budu al dente. Makni s vatre i odmah posluži. Po želji dodaj još parmezana.\",\n    težinaPripreme: \"Jednostavno\",\n    brojOsoba: 2,\n    vrijemePripreme: 20,\n    grupaJela: \"Glavno jelo\",\n    kategorija: \"Vegetarijansko\",\n    objavljeno: \"1660840055\"\n  }, {\n    id: 2,\n    slika: \"https://picsum.photos/id/961/500/500\",\n    nazivRecepta: \"Domaća čokolada s dodacima\",\n    sastojci: [{\n      sastojak: \"čokolada za kuhanje\",\n      kolicina: 200,\n      mjera: \"grama\"\n    }, {\n      sastojak: \"maslac od kokosa\",\n      kolicina: 15,\n      mjera: \"grama\"\n    }, {\n      sastojak: \"orašasti plodovi\",\n      kolicina: 100,\n      mjera: \"grama\"\n    }],\n    priprema: \"Čokoladu stavite u posudu s kokosovim maslacem, pa ju otopite na štednjaku tako da stavite posudu s čokoladom iznad posude u kojoj je kipuća voda. Izlijte rastopljenu čokoladu u kalup za čokoladu ili drugu posudu pravilnog oblika. U čokoladu ubacite sve dodatke koje ste odabrali. Stavite čokoladu na hlađenje u frižider, barem 3 sata.\",\n    težinaPripreme: \"Srednje zahtjevno\",\n    brojOsoba: 2,\n    vrijemePripreme: 30,\n    grupaJela: \"Desert\",\n    kategorija: \"Vegan\",\n    objavljeno: \"1660667255\"\n  }, {\n    id: 3,\n    slika: \"https://picsum.photos/id/345/500/500\",\n    nazivRecepta: \"Sladoled od manga\",\n    sastojci: [{\n      sastojak: \"mango\",\n      kolicina: 2,\n      mjera: \"čaše\"\n    }, {\n      sastojak: \"mlijeko od kokosa\",\n      kolicina: 10,\n      mjera: \"žlica\"\n    }, {\n      sastojak: \"biljni jogurt\",\n      kolicina: 1,\n      mjera: \"žlica\"\n    }, {\n      sastojak: \"agavin sirup\",\n      kolicina: 1,\n      mjera: \"žlica\"\n    }],\n    priprema: \"Sve sastojke stavite u blender i blendate dok ne dobijete glatku kremu. Kremu prebacite u posudu ili kalup za sladoled. Stavite na hlađenje najmanje 2-3 sata. Prije posluživanja ostavite kratko na sobnoj temperaturi da omekša.\",\n    težinaPripreme: \"Jednostavno\",\n    brojOsoba: 2,\n    vrijemePripreme: 35,\n    grupaJela: \"Desert\",\n    kategorija: \"Vegan\",\n    objavljeno: \"1660408055\"\n  }]\n};\nvar _default = storage;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwicmVjZXB0aSIsImlkIiwic2xpa2EiLCJuYXppdlJlY2VwdGEiLCJzYXN0b2pjaSIsInNhc3RvamFrIiwia29saWNpbmEiLCJtamVyYSIsInByaXByZW1hIiwidGXFvmluYVByaXByZW1lIiwiYnJvak9zb2JhIiwidnJpamVtZVByaXByZW1lIiwiZ3J1cGFKZWxhIiwia2F0ZWdvcmlqYSIsIm9iamF2bGplbm8iXSwic291cmNlUm9vdCI6IkM6XFxXQS1wcm9qZWt0XFxiYWNrZW5kXFxzcmNcXCIsInNvdXJjZXMiOlsibWVtb3J5X3N0b3JhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHN0b3JhZ2UgPSB7XHJcbiAgICByZWNlcHRpOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDoxLFxyXG4gICAgICAgICAgICBzbGlrYTogXCJodHRwczovL3BpY3N1bS5waG90b3MvaWQvMTIzLzUwMC81MDBcIixcclxuICAgICAgICAgICAgbmF6aXZSZWNlcHRhOiBcIlJlemFuY2kgb2QgdGlrdmljYSBzIMSNZcWhbmpha29tIGkgcGFybWV6YW5vbVwiLFxyXG4gICAgICAgICAgICBzYXN0b2pjaTogWyBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNhc3RvamFrOiBcInRpa3ZpY2FcIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiAzLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwia29tYWRhXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYXN0b2phazogXCJtYXNsYWNcIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiAyLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwixb5sacSNaWNlXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYXN0b2phazogXCLEjWXFoW5qYWtcIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiAyLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwicmXFvm5qYVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2FzdG9qYWs6IFwicGFybWV6YW5cIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiA1MCxcclxuICAgICAgICAgICAgICAgIG1qZXJhOiBcImdyYW1hXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHByaXByZW1hOiBcIlRpa3ZpY2UgbmFyZcW+aSBuYSB0YW5rZSByZXphbmNlLiBaYWdyaWogdmVsaWt1IHRhdnUgbmEgc3JlZG5qZSBqYWtvaiB2YXRyaS4gUmFzdG9waSBtYXNsYWMgcGEgZG9kYWogxI1lxaFuamFrLiBQaXJqYWoga3JhdGtvIMSNZcWhbmphayBkb2sgbmUgemFtaXJpxaFlICgxLTIgbWludXRlKS4gUGF6aSBkYSDEjWXFoW5qYWsgbmUgemFnb3JpLiBEb2RhaiB0aWt2aWNlIG5hcmliYW5lIG5hIHJlemFuY2UgaSBuYXJpYmFuaSBwYXJtZXphbiB0ZSBzb2wgaSBwYXBhciBwbyB1a3VzdS4gUGlyamFqIDEtMiBtaW51dGUgaWxpIGRvayByZXphbmNpIG5lIGJ1ZHUgYWwgZGVudGUuIE1ha25pIHMgdmF0cmUgaSBvZG1haCBwb3NsdcW+aS4gUG8gxb5lbGppIGRvZGFqIGpvxaEgcGFybWV6YW5hLlwiLFxyXG4gICAgICAgICAgICB0ZcW+aW5hUHJpcHJlbWU6IFwiSmVkbm9zdGF2bm9cIixcclxuICAgICAgICAgICAgYnJvak9zb2JhOiAyLFxyXG4gICAgICAgICAgICB2cmlqZW1lUHJpcHJlbWU6IDIwLFxyXG4gICAgICAgICAgICBncnVwYUplbGE6IFwiR2xhdm5vIGplbG9cIixcclxuICAgICAgICAgICAga2F0ZWdvcmlqYTogXCJWZWdldGFyaWphbnNrb1wiLFxyXG4gICAgICAgICAgICBvYmphdmxqZW5vOiBcIjE2NjA4NDAwNTVcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6MixcclxuICAgICAgICAgICAgc2xpa2E6IFwiaHR0cHM6Ly9waWNzdW0ucGhvdG9zL2lkLzk2MS81MDAvNTAwXCIsXHJcbiAgICAgICAgICAgIG5heml2UmVjZXB0YTogXCJEb21hxIdhIMSNb2tvbGFkYSBzIGRvZGFjaW1hXCIsXHJcbiAgICAgICAgICAgIHNhc3RvamNpOiBbIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2FzdG9qYWs6IFwixI1va29sYWRhIHphIGt1aGFuamVcIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiAyMDAsXHJcbiAgICAgICAgICAgICAgICBtamVyYTogXCJncmFtYVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2FzdG9qYWs6IFwibWFzbGFjIG9kIGtva29zYVwiLFxyXG4gICAgICAgICAgICAgICAga29saWNpbmE6IDE1LFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwiZ3JhbWFcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNhc3RvamFrOiBcIm9yYcWhYXN0aSBwbG9kb3ZpXCIsXHJcbiAgICAgICAgICAgICAgICBrb2xpY2luYTogMTAwLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwiZ3JhbWFcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgcHJpcHJlbWE6IFwixIxva29sYWR1IHN0YXZpdGUgdSBwb3N1ZHUgcyBrb2tvc292aW0gbWFzbGFjZW0sIHBhIGp1IG90b3BpdGUgbmEgxaF0ZWRuamFrdSB0YWtvIGRhIHN0YXZpdGUgcG9zdWR1IHMgxI1va29sYWRvbSBpem5hZCBwb3N1ZGUgdSBrb2pvaiBqZSBraXB1xIdhIHZvZGEuIEl6bGlqdGUgcmFzdG9wbGplbnUgxI1va29sYWR1IHUga2FsdXAgemEgxI1va29sYWR1IGlsaSBkcnVndSBwb3N1ZHUgcHJhdmlsbm9nIG9ibGlrYS4gVSDEjW9rb2xhZHUgdWJhY2l0ZSBzdmUgZG9kYXRrZSBrb2plIHN0ZSBvZGFicmFsaS4gU3Rhdml0ZSDEjW9rb2xhZHUgbmEgaGxhxJFlbmplIHUgZnJpxb5pZGVyLCBiYXJlbSAzIHNhdGEuXCIsXHJcbiAgICAgICAgICAgIHRlxb5pbmFQcmlwcmVtZTogXCJTcmVkbmplIHphaHRqZXZub1wiLFxyXG4gICAgICAgICAgICBicm9qT3NvYmE6IDIsXHJcbiAgICAgICAgICAgIHZyaWplbWVQcmlwcmVtZTogMzAsXHJcbiAgICAgICAgICAgIGdydXBhSmVsYTogXCJEZXNlcnRcIixcclxuICAgICAgICAgICAga2F0ZWdvcmlqYTogXCJWZWdhblwiLCAgXHJcbiAgICAgICAgICAgIG9iamF2bGplbm86IFwiMTY2MDY2NzI1NVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDozLFxyXG4gICAgICAgICAgICBzbGlrYTogXCJodHRwczovL3BpY3N1bS5waG90b3MvaWQvMzQ1LzUwMC81MDBcIixcclxuICAgICAgICAgICAgbmF6aXZSZWNlcHRhOiBcIlNsYWRvbGVkIG9kIG1hbmdhXCIsXHJcbiAgICAgICAgICAgIHNhc3RvamNpOiBbIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2FzdG9qYWs6IFwibWFuZ29cIixcclxuICAgICAgICAgICAgICAgIGtvbGljaW5hOiAyLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwixI1hxaFlXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYXN0b2phazogXCJtbGlqZWtvIG9kIGtva29zYVwiLFxyXG4gICAgICAgICAgICAgICAga29saWNpbmE6IDEwLFxyXG4gICAgICAgICAgICAgICAgbWplcmE6IFwixb5saWNhXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYXN0b2phazogXCJiaWxqbmkgam9ndXJ0XCIsXHJcbiAgICAgICAgICAgICAgICBrb2xpY2luYTogMSxcclxuICAgICAgICAgICAgICAgIG1qZXJhOiBcIsW+bGljYVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2FzdG9qYWs6IFwiYWdhdmluIHNpcnVwXCIsXHJcbiAgICAgICAgICAgICAgICBrb2xpY2luYTogMSxcclxuICAgICAgICAgICAgICAgIG1qZXJhOiBcIsW+bGljYVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBwcmlwcmVtYTogXCJTdmUgc2FzdG9qa2Ugc3Rhdml0ZSB1IGJsZW5kZXIgaSBibGVuZGF0ZSBkb2sgbmUgZG9iaWpldGUgZ2xhdGt1IGtyZW11LiBLcmVtdSBwcmViYWNpdGUgdSBwb3N1ZHUgaWxpIGthbHVwIHphIHNsYWRvbGVkLiBTdGF2aXRlIG5hIGhsYcSRZW5qZSBuYWptYW5qZSAyLTMgc2F0YS4gUHJpamUgcG9zbHXFvml2YW5qYSBvc3Rhdml0ZSBrcmF0a28gbmEgc29ibm9qIHRlbXBlcmF0dXJpIGRhIG9tZWvFoWEuXCIsXHJcbiAgICAgICAgICAgIHRlxb5pbmFQcmlwcmVtZTogXCJKZWRub3N0YXZub1wiLFxyXG4gICAgICAgICAgICBicm9qT3NvYmE6IDIsXHJcbiAgICAgICAgICAgIHZyaWplbWVQcmlwcmVtZTogMzUsXHJcbiAgICAgICAgICAgIGdydXBhSmVsYTogXCJEZXNlcnRcIixcclxuICAgICAgICAgICAga2F0ZWdvcmlqYTogXCJWZWdhblwiLFxyXG4gICAgICAgICAgICBvYmphdmxqZW5vOiBcIjE2NjA0MDgwNTVcIixcclxuICAgICAgICB9XHJcblxyXG4gICAgXVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUlBLE9BQU8sR0FBRztFQUNWQyxPQUFPLEVBQUUsQ0FDTDtJQUNJQyxFQUFFLEVBQUMsQ0FEUDtJQUVJQyxLQUFLLEVBQUUsc0NBRlg7SUFHSUMsWUFBWSxFQUFFLDZDQUhsQjtJQUlJQyxRQUFRLEVBQUUsQ0FDTjtNQUNBQyxRQUFRLEVBQUUsU0FEVjtNQUVBQyxRQUFRLEVBQUUsQ0FGVjtNQUdBQyxLQUFLLEVBQUU7SUFIUCxDQURNLEVBTU47TUFDQUYsUUFBUSxFQUFFLFFBRFY7TUFFQUMsUUFBUSxFQUFFLENBRlY7TUFHQUMsS0FBSyxFQUFFO0lBSFAsQ0FOTSxFQVdOO01BQ0FGLFFBQVEsRUFBRSxTQURWO01BRUFDLFFBQVEsRUFBRSxDQUZWO01BR0FDLEtBQUssRUFBRTtJQUhQLENBWE0sRUFnQk47TUFDQUYsUUFBUSxFQUFFLFVBRFY7TUFFQUMsUUFBUSxFQUFFLEVBRlY7TUFHQUMsS0FBSyxFQUFFO0lBSFAsQ0FoQk0sQ0FKZDtJQTBCSUMsUUFBUSxFQUFFLDZYQTFCZDtJQTJCSUMsY0FBYyxFQUFFLGFBM0JwQjtJQTRCSUMsU0FBUyxFQUFFLENBNUJmO0lBNkJJQyxlQUFlLEVBQUUsRUE3QnJCO0lBOEJJQyxTQUFTLEVBQUUsYUE5QmY7SUErQklDLFVBQVUsRUFBRSxnQkEvQmhCO0lBZ0NJQyxVQUFVLEVBQUU7RUFoQ2hCLENBREssRUFtQ0w7SUFDSWIsRUFBRSxFQUFDLENBRFA7SUFFSUMsS0FBSyxFQUFFLHNDQUZYO0lBR0lDLFlBQVksRUFBRSw0QkFIbEI7SUFJSUMsUUFBUSxFQUFFLENBQ047TUFDQUMsUUFBUSxFQUFFLHFCQURWO01BRUFDLFFBQVEsRUFBRSxHQUZWO01BR0FDLEtBQUssRUFBRTtJQUhQLENBRE0sRUFNTjtNQUNBRixRQUFRLEVBQUUsa0JBRFY7TUFFQUMsUUFBUSxFQUFFLEVBRlY7TUFHQUMsS0FBSyxFQUFFO0lBSFAsQ0FOTSxFQVdOO01BQ0FGLFFBQVEsRUFBRSxrQkFEVjtNQUVBQyxRQUFRLEVBQUUsR0FGVjtNQUdBQyxLQUFLLEVBQUU7SUFIUCxDQVhNLENBSmQ7SUFxQklDLFFBQVEsRUFBRSxpVkFyQmQ7SUFzQklDLGNBQWMsRUFBRSxtQkF0QnBCO0lBdUJJQyxTQUFTLEVBQUUsQ0F2QmY7SUF3QklDLGVBQWUsRUFBRSxFQXhCckI7SUF5QklDLFNBQVMsRUFBRSxRQXpCZjtJQTBCSUMsVUFBVSxFQUFFLE9BMUJoQjtJQTJCSUMsVUFBVSxFQUFFO0VBM0JoQixDQW5DSyxFQWdFTDtJQUNJYixFQUFFLEVBQUMsQ0FEUDtJQUVJQyxLQUFLLEVBQUUsc0NBRlg7SUFHSUMsWUFBWSxFQUFFLG1CQUhsQjtJQUlJQyxRQUFRLEVBQUUsQ0FDTjtNQUNBQyxRQUFRLEVBQUUsT0FEVjtNQUVBQyxRQUFRLEVBQUUsQ0FGVjtNQUdBQyxLQUFLLEVBQUU7SUFIUCxDQURNLEVBTU47TUFDQUYsUUFBUSxFQUFFLG1CQURWO01BRUFDLFFBQVEsRUFBRSxFQUZWO01BR0FDLEtBQUssRUFBRTtJQUhQLENBTk0sRUFXTjtNQUNBRixRQUFRLEVBQUUsZUFEVjtNQUVBQyxRQUFRLEVBQUUsQ0FGVjtNQUdBQyxLQUFLLEVBQUU7SUFIUCxDQVhNLEVBZ0JOO01BQ0FGLFFBQVEsRUFBRSxjQURWO01BRUFDLFFBQVEsRUFBRSxDQUZWO01BR0FDLEtBQUssRUFBRTtJQUhQLENBaEJNLENBSmQ7SUEwQklDLFFBQVEsRUFBRSxvT0ExQmQ7SUEyQklDLGNBQWMsRUFBRSxhQTNCcEI7SUE0QklDLFNBQVMsRUFBRSxDQTVCZjtJQTZCSUMsZUFBZSxFQUFFLEVBN0JyQjtJQThCSUMsU0FBUyxFQUFFLFFBOUJmO0lBK0JJQyxVQUFVLEVBQUUsT0EvQmhCO0lBZ0NJQyxVQUFVLEVBQUU7RUFoQ2hCLENBaEVLO0FBREMsQ0FBZDtlQXdHZWYsTyJ9","map":{"version":3,"names":["storage","recepti","id","slika","nazivRecepta","sastojci","sastojak","kolicina","mjera","priprema","težinaPripreme","brojOsoba","vrijemePripreme","grupaJela","kategorija","objavljeno"],"sourceRoot":"C:\\WA-projekt\\backend\\src\\","sources":["memory_storage.js"],"sourcesContent":["let storage = {\r\n    recepti: [\r\n        {\r\n            id:1,\r\n            slika: \"https://picsum.photos/id/123/500/500\",\r\n            nazivRecepta: \"Rezanci od tikvica s češnjakom i parmezanom\",\r\n            sastojci: [ \r\n                {\r\n                sastojak: \"tikvica\",\r\n                kolicina: 3,\r\n                mjera: \"komada\"\r\n                },\r\n                {\r\n                sastojak: \"maslac\",\r\n                kolicina: 2,\r\n                mjera: \"žličice\"\r\n                },\r\n                {\r\n                sastojak: \"češnjak\",\r\n                kolicina: 2,\r\n                mjera: \"režnja\"\r\n                },\r\n                {\r\n                sastojak: \"parmezan\",\r\n                kolicina: 50,\r\n                mjera: \"grama\"\r\n                },\r\n            ],\r\n            priprema: \"Tikvice nareži na tanke rezance. Zagrij veliku tavu na srednje jakoj vatri. Rastopi maslac pa dodaj češnjak. Pirjaj kratko češnjak dok ne zamiriše (1-2 minute). Pazi da češnjak ne zagori. Dodaj tikvice naribane na rezance i naribani parmezan te sol i papar po ukusu. Pirjaj 1-2 minute ili dok rezanci ne budu al dente. Makni s vatre i odmah posluži. Po želji dodaj još parmezana.\",\r\n            težinaPripreme: \"Jednostavno\",\r\n            brojOsoba: 2,\r\n            vrijemePripreme: 20,\r\n            grupaJela: \"Glavno jelo\",\r\n            kategorija: \"Vegetarijansko\",\r\n            objavljeno: \"1660840055\",\r\n        },\r\n        {\r\n            id:2,\r\n            slika: \"https://picsum.photos/id/961/500/500\",\r\n            nazivRecepta: \"Domaća čokolada s dodacima\",\r\n            sastojci: [ \r\n                {\r\n                sastojak: \"čokolada za kuhanje\",\r\n                kolicina: 200,\r\n                mjera: \"grama\"\r\n                },\r\n                {\r\n                sastojak: \"maslac od kokosa\",\r\n                kolicina: 15,\r\n                mjera: \"grama\"\r\n                },\r\n                {\r\n                sastojak: \"orašasti plodovi\",\r\n                kolicina: 100,\r\n                mjera: \"grama\"\r\n                },\r\n            ],\r\n            priprema: \"Čokoladu stavite u posudu s kokosovim maslacem, pa ju otopite na štednjaku tako da stavite posudu s čokoladom iznad posude u kojoj je kipuća voda. Izlijte rastopljenu čokoladu u kalup za čokoladu ili drugu posudu pravilnog oblika. U čokoladu ubacite sve dodatke koje ste odabrali. Stavite čokoladu na hlađenje u frižider, barem 3 sata.\",\r\n            težinaPripreme: \"Srednje zahtjevno\",\r\n            brojOsoba: 2,\r\n            vrijemePripreme: 30,\r\n            grupaJela: \"Desert\",\r\n            kategorija: \"Vegan\",  \r\n            objavljeno: \"1660667255\",\r\n        },\r\n        {\r\n            id:3,\r\n            slika: \"https://picsum.photos/id/345/500/500\",\r\n            nazivRecepta: \"Sladoled od manga\",\r\n            sastojci: [ \r\n                {\r\n                sastojak: \"mango\",\r\n                kolicina: 2,\r\n                mjera: \"čaše\"\r\n                },\r\n                {\r\n                sastojak: \"mlijeko od kokosa\",\r\n                kolicina: 10,\r\n                mjera: \"žlica\"\r\n                },\r\n                {\r\n                sastojak: \"biljni jogurt\",\r\n                kolicina: 1,\r\n                mjera: \"žlica\"\r\n                },\r\n                {\r\n                sastojak: \"agavin sirup\",\r\n                kolicina: 1,\r\n                mjera: \"žlica\"\r\n                },\r\n            ],\r\n            priprema: \"Sve sastojke stavite u blender i blendate dok ne dobijete glatku kremu. Kremu prebacite u posudu ili kalup za sladoled. Stavite na hlađenje najmanje 2-3 sata. Prije posluživanja ostavite kratko na sobnoj temperaturi da omekša.\",\r\n            težinaPripreme: \"Jednostavno\",\r\n            brojOsoba: 2,\r\n            vrijemePripreme: 35,\r\n            grupaJela: \"Desert\",\r\n            kategorija: \"Vegan\",\r\n            objavljeno: \"1660408055\",\r\n        }\r\n\r\n    ]\r\n}\r\n\r\n\r\nexport default storage;"],"mappings":";;;;;;AAAA,IAAIA,OAAO,GAAG;EACVC,OAAO,EAAE,CACL;IACIC,EAAE,EAAC,CADP;IAEIC,KAAK,EAAE,sCAFX;IAGIC,YAAY,EAAE,6CAHlB;IAIIC,QAAQ,EAAE,CACN;MACAC,QAAQ,EAAE,SADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CADM,EAMN;MACAF,QAAQ,EAAE,QADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CANM,EAWN;MACAF,QAAQ,EAAE,SADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CAXM,EAgBN;MACAF,QAAQ,EAAE,UADV;MAEAC,QAAQ,EAAE,EAFV;MAGAC,KAAK,EAAE;IAHP,CAhBM,CAJd;IA0BIC,QAAQ,EAAE,6XA1Bd;IA2BIC,cAAc,EAAE,aA3BpB;IA4BIC,SAAS,EAAE,CA5Bf;IA6BIC,eAAe,EAAE,EA7BrB;IA8BIC,SAAS,EAAE,aA9Bf;IA+BIC,UAAU,EAAE,gBA/BhB;IAgCIC,UAAU,EAAE;EAhChB,CADK,EAmCL;IACIb,EAAE,EAAC,CADP;IAEIC,KAAK,EAAE,sCAFX;IAGIC,YAAY,EAAE,4BAHlB;IAIIC,QAAQ,EAAE,CACN;MACAC,QAAQ,EAAE,qBADV;MAEAC,QAAQ,EAAE,GAFV;MAGAC,KAAK,EAAE;IAHP,CADM,EAMN;MACAF,QAAQ,EAAE,kBADV;MAEAC,QAAQ,EAAE,EAFV;MAGAC,KAAK,EAAE;IAHP,CANM,EAWN;MACAF,QAAQ,EAAE,kBADV;MAEAC,QAAQ,EAAE,GAFV;MAGAC,KAAK,EAAE;IAHP,CAXM,CAJd;IAqBIC,QAAQ,EAAE,iVArBd;IAsBIC,cAAc,EAAE,mBAtBpB;IAuBIC,SAAS,EAAE,CAvBf;IAwBIC,eAAe,EAAE,EAxBrB;IAyBIC,SAAS,EAAE,QAzBf;IA0BIC,UAAU,EAAE,OA1BhB;IA2BIC,UAAU,EAAE;EA3BhB,CAnCK,EAgEL;IACIb,EAAE,EAAC,CADP;IAEIC,KAAK,EAAE,sCAFX;IAGIC,YAAY,EAAE,mBAHlB;IAIIC,QAAQ,EAAE,CACN;MACAC,QAAQ,EAAE,OADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CADM,EAMN;MACAF,QAAQ,EAAE,mBADV;MAEAC,QAAQ,EAAE,EAFV;MAGAC,KAAK,EAAE;IAHP,CANM,EAWN;MACAF,QAAQ,EAAE,eADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CAXM,EAgBN;MACAF,QAAQ,EAAE,cADV;MAEAC,QAAQ,EAAE,CAFV;MAGAC,KAAK,EAAE;IAHP,CAhBM,CAJd;IA0BIC,QAAQ,EAAE,oOA1Bd;IA2BIC,cAAc,EAAE,aA3BpB;IA4BIC,SAAS,EAAE,CA5Bf;IA6BIC,eAAe,EAAE,EA7BrB;IA8BIC,SAAS,EAAE,QA9Bf;IA+BIC,UAAU,EAAE,OA/BhB;IAgCIC,UAAU,EAAE;EAhChB,CAhEK;AADC,CAAd;eAwGef,O"}},"mtime":1660850458770},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\WA-projekt\\\\backend\",\"filename\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\WA-projekt\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _mongodb = _interopRequireDefault(require(\"mongodb\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar connection_string = 'mongodb+srv://admin:admin@cluster0.dnzl8fu.mongodb.net/?retryWrites=true&w=majority'; //naknadno dodano jer je bacalo grešku da MongoClient nije definiran\n\nvar MongoClient = require('mongodb').MongoClient; //instanciranje mongo client-a\n//to je js objekt koji služi za pristup prema bazi na navedenom connection stringu\n\n\nvar client = new MongoClient(connection_string, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}); //da bi mogli koristiti bazu\n\nvar db = null; //exportamo Promise koji resolva na konekciju\n\nvar _default = function _default() {\n  return new Promise(function (resolve, reject) {\n    //ako smo inicijalizirali bazu i klijent je još uvijek spojen\n    ////makla sam da je isConnected funkcija jer je bacalo grešku\n    if (db && client.isConnected) {\n      resolve(db);\n    }\n\n    client.connect(function (err) {\n      if (err) {\n        reject(\"Došlo je do greške: \" + err);\n      } else {\n        console.log(\"Uspješno spajanje na bazu\");\n        db = client.db(\"let'sCook\");\n        resolve(db);\n      }\n    });\n  });\n};\n\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0aW9uX3N0cmluZyIsIk1vbmdvQ2xpZW50IiwicmVxdWlyZSIsImNsaWVudCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImRiIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxcV0EtcHJvamVrdFxcYmFja2VuZFxcc3JjXFwiLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nbyBmcm9tICdtb25nb2RiJ1xyXG5cclxubGV0IGNvbm5lY3Rpb25fc3RyaW5nID0gJ21vbmdvZGIrc3J2Oi8vYWRtaW46YWRtaW5AY2x1c3RlcjAuZG56bDhmdS5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JztcclxuXHJcbi8vbmFrbmFkbm8gZG9kYW5vIGplciBqZSBiYWNhbG8gZ3JlxaFrdSBkYSBNb25nb0NsaWVudCBuaWplIGRlZmluaXJhblxyXG5sZXQgTW9uZ29DbGllbnQgPSByZXF1aXJlKCdtb25nb2RiJykuTW9uZ29DbGllbnRcclxuXHJcbi8vaW5zdGFuY2lyYW5qZSBtb25nbyBjbGllbnQtYVxyXG4vL3RvIGplIGpzIG9iamVrdCBrb2ppIHNsdcW+aSB6YSBwcmlzdHVwIHByZW1hIGJhemkgbmEgbmF2ZWRlbm9tIGNvbm5lY3Rpb24gc3RyaW5ndVxyXG5sZXQgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KGNvbm5lY3Rpb25fc3RyaW5nLCB7XHJcbiAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWVcclxufSkgXHJcblxyXG4vL2RhIGJpIG1vZ2xpIGtvcmlzdGl0aSBiYXp1XHJcbmxldCBkYiA9IG51bGxcclxuXHJcbi8vZXhwb3J0YW1vIFByb21pc2Uga29qaSByZXNvbHZhIG5hIGtvbmVrY2lqdVxyXG5leHBvcnQgZGVmYXVsdCAoKSA9PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vYWtvIHNtbyBpbmljaWphbGl6aXJhbGkgYmF6dSBpIGtsaWplbnQgamUgam/FoSB1dmlqZWsgc3BvamVuXHJcbiAgICAgICAgLy8vL21ha2xhIHNhbSBkYSBqZSBpc0Nvbm5lY3RlZCBmdW5rY2lqYSBqZXIgamUgYmFjYWxvIGdyZcWha3VcclxuICAgICAgICBpZiAoZGIgJiYgY2xpZW50LmlzQ29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZGIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsaWVudC5jb25uZWN0KGVyciA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiRG/FoWxvIGplIGRvIGdyZcWha2U6IFwiICsgZXJyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc3BqZcWhbm8gc3BhamFuamUgbmEgYmF6dVwiKVxyXG4gICAgICAgICAgICAgICAgZGIgPSBjbGllbnQuZGIoXCJsZXQnc0Nvb2tcIilcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUEsSUFBSUEsaUJBQWlCLEdBQUcscUZBQXhCLEMsQ0FFQTs7QUFDQSxJQUFJQyxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJELFdBQXJDLEMsQ0FFQTtBQUNBOzs7QUFDQSxJQUFJRSxNQUFNLEdBQUcsSUFBSUYsV0FBSixDQUFnQkQsaUJBQWhCLEVBQW1DO0VBQzVDSSxlQUFlLEVBQUUsSUFEMkI7RUFFNUNDLGtCQUFrQixFQUFFO0FBRndCLENBQW5DLENBQWIsQyxDQUtBOztBQUNBLElBQUlDLEVBQUUsR0FBRyxJQUFULEMsQ0FFQTs7ZUFDZSxvQkFBTTtFQUNqQixPQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7SUFDcEM7SUFDQTtJQUNBLElBQUlILEVBQUUsSUFBSUgsTUFBTSxDQUFDTyxXQUFqQixFQUE4QjtNQUMxQkYsT0FBTyxDQUFDRixFQUFELENBQVA7SUFDSDs7SUFDREgsTUFBTSxDQUFDUSxPQUFQLENBQWUsVUFBQUMsR0FBRyxFQUFJO01BQ2xCLElBQUdBLEdBQUgsRUFBUTtRQUNKSCxNQUFNLENBQUMseUJBQXlCRyxHQUExQixDQUFOO01BQ0gsQ0FGRCxNQUdLO1FBQ0RDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaO1FBQ0FSLEVBQUUsR0FBR0gsTUFBTSxDQUFDRyxFQUFQLENBQVUsV0FBVixDQUFMO1FBQ0FFLE9BQU8sQ0FBQ0YsRUFBRCxDQUFQO01BQ0g7SUFDSixDQVREO0VBVUgsQ0FoQk0sQ0FBUDtBQWlCSCxDIn0=","map":{"version":3,"names":["connection_string","MongoClient","require","client","useNewUrlParser","useUnifiedTopology","db","Promise","resolve","reject","isConnected","connect","err","console","log"],"sourceRoot":"C:\\WA-projekt\\backend\\src\\","sources":["db.js"],"sourcesContent":["import mongo from 'mongodb'\r\n\r\nlet connection_string = 'mongodb+srv://admin:admin@cluster0.dnzl8fu.mongodb.net/?retryWrites=true&w=majority';\r\n\r\n//naknadno dodano jer je bacalo grešku da MongoClient nije definiran\r\nlet MongoClient = require('mongodb').MongoClient\r\n\r\n//instanciranje mongo client-a\r\n//to je js objekt koji služi za pristup prema bazi na navedenom connection stringu\r\nlet client = new MongoClient(connection_string, {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true\r\n}) \r\n\r\n//da bi mogli koristiti bazu\r\nlet db = null\r\n\r\n//exportamo Promise koji resolva na konekciju\r\nexport default () => {\r\n    return new Promise((resolve, reject) => {\r\n        //ako smo inicijalizirali bazu i klijent je još uvijek spojen\r\n        ////makla sam da je isConnected funkcija jer je bacalo grešku\r\n        if (db && client.isConnected) {\r\n            resolve(db)\r\n        }\r\n        client.connect(err => {\r\n            if(err) {\r\n                reject(\"Došlo je do greške: \" + err)\r\n            }\r\n            else {\r\n                console.log(\"Uspješno spajanje na bazu\")\r\n                db = client.db(\"let'sCook\")\r\n                resolve(db)\r\n            }\r\n        })\r\n    })\r\n}"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAIA,iBAAiB,GAAG,qFAAxB,C,CAEA;;AACA,IAAIC,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAArC,C,CAEA;AACA;;;AACA,IAAIE,MAAM,GAAG,IAAIF,WAAJ,CAAgBD,iBAAhB,EAAmC;EAC5CI,eAAe,EAAE,IAD2B;EAE5CC,kBAAkB,EAAE;AAFwB,CAAnC,CAAb,C,CAKA;;AACA,IAAIC,EAAE,GAAG,IAAT,C,CAEA;;eACe,oBAAM;EACjB,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;IACpC;IACA;IACA,IAAIH,EAAE,IAAIH,MAAM,CAACO,WAAjB,EAA8B;MAC1BF,OAAO,CAACF,EAAD,CAAP;IACH;;IACDH,MAAM,CAACQ,OAAP,CAAe,UAAAC,GAAG,EAAI;MAClB,IAAGA,GAAH,EAAQ;QACJH,MAAM,CAAC,yBAAyBG,GAA1B,CAAN;MACH,CAFD,MAGK;QACDC,OAAO,CAACC,GAAR,CAAY,2BAAZ;QACAR,EAAE,GAAGH,MAAM,CAACG,EAAP,CAAU,WAAV,CAAL;QACAE,OAAO,CAACF,EAAD,CAAP;MACH;IACJ,CATD;EAUH,CAhBM,CAAP;AAiBH,C"}},"mtime":1663167041504},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\WA-projekt\\\\backend\",\"filename\":\"C:\\\\WA-projekt\\\\backend\\\\src\\\\auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\WA-projekt\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _mongodb = _interopRequireDefault(require(\"mongodb\"));\n\nvar _db = _interopRequireDefault(require(\"./db.js\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//da jedan korisnik ne bi mogao imati više registracija \n//zbog toga kreiramo index na username\n_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n  var db;\n  return _regeneratorRuntime().wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0, _db[\"default\"])();\n\n        case 2:\n          db = _context.sent;\n          _context.next = 5;\n          return db.collection(\"users\").createIndex({\n            username: 1\n          }, {\n            unique: true\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}))();\n\nvar _default = {\n  //funkcija za registraciju\n  //userData su podaci koji dolaze sa frontend-a\n  registerUser: function registerUser(userData) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var db, doc, result;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(userData); //spajanje na bazu\n\n              _context2.next = 3;\n              return (0, _db[\"default\"])();\n\n            case 3:\n              db = _context2.sent;\n              _context2.t0 = userData.username;\n              _context2.next = 7;\n              return _bcrypt[\"default\"].hash(userData.password, 8);\n\n            case 7:\n              _context2.t1 = _context2.sent;\n              doc = {\n                username: _context2.t0,\n                password: _context2.t1\n              };\n              _context2.prev = 9;\n              _context2.next = 12;\n              return db.collection(\"users\").insertOne(doc);\n\n            case 12:\n              result = _context2.sent;\n              console.log(result);\n\n              if (!(result && result.insertedId)) {\n                _context2.next = 16;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", result.insertedId);\n\n            case 16:\n              _context2.next = 22;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t2 = _context2[\"catch\"](9);\n\n              if (!(_context2.t2.code == 11000)) {\n                _context2.next = 22;\n                break;\n              }\n\n              throw new Error(\"Korisnik već postoji\");\n\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[9, 18]]);\n    }))();\n  },\n  //funkcija za autentifikaciju\n  authenticateUser: function authenticateUser(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var db, user, token;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return (0, _db[\"default\"])();\n\n            case 2:\n              db = _context3.sent;\n              _context3.next = 5;\n              return db.collection(\"users\").findOne({\n                username: username\n              });\n\n            case 5:\n              user = _context3.sent;\n              _context3.t0 = user && user.password;\n\n              if (!_context3.t0) {\n                _context3.next = 11;\n                break;\n              }\n\n              _context3.next = 10;\n              return _bcrypt[\"default\"].compare(password, user.password);\n\n            case 10:\n              _context3.t0 = _context3.sent;\n\n            case 11:\n              if (!_context3.t0) {\n                _context3.next = 17;\n                break;\n              }\n\n              delete user.password;\n              token = _jsonwebtoken[\"default\"].sign(user, process.env.JWT_SECRET, {\n                algorithm: \"HS512\",\n                expiresIn: \"1 week\" //trajanje tokena\n\n              });\n              return _context3.abrupt(\"return\", {\n                token: token,\n                username: user.username\n              });\n\n            case 17:\n              throw new Error(\"Cannot authenticate\");\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  //metoda za promjenu lozinke\n  changeUserPassword: function changeUserPassword(username, old_password, new_password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var db, user, new_password_hashed, result;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return (0, _db[\"default\"])();\n\n            case 2:\n              db = _context4.sent;\n              _context4.next = 5;\n              return db.collection(\"users\").findOne({\n                username: username\n              });\n\n            case 5:\n              user = _context4.sent;\n              _context4.t0 = user && user.password;\n\n              if (!_context4.t0) {\n                _context4.next = 11;\n                break;\n              }\n\n              _context4.next = 10;\n              return _bcrypt[\"default\"].compare(old_password, user.password);\n\n            case 10:\n              _context4.t0 = _context4.sent;\n\n            case 11:\n              if (!_context4.t0) {\n                _context4.next = 19;\n                break;\n              }\n\n              _context4.next = 14;\n              return _bcrypt[\"default\"].hash(new_password, 8);\n\n            case 14:\n              new_password_hashed = _context4.sent;\n              _context4.next = 17;\n              return db.collection(\"users\").updateOne({\n                _id: user._id\n              }, //id korisnika iz baze\n              {\n                $set: {\n                  password: new_password_hashed\n                }\n              } //mijenjanje lozinke\n              );\n\n            case 17:\n              result = _context4.sent;\n              return _context4.abrupt(\"return\", result.modifiedCount == 1);\n\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }))();\n  },\n  //provjera tokena\n  //next koristimo jer middleware funkcija može biti više, te mora pozvati next da bi se ostatak funkcije ispunio\n  verify: function verify(req, res, next) {\n    try {\n      //izvlačimo token (ili potpis?)\n      var authorization = req.headers.authorization.split(' ');\n      var type = authorization[0]; //tip tokena\n\n      var token = authorization[1]; //token\n\n      if (type !== \"Bearer\") {\n        //ako nije Bearer token\n        return res.status(401).send();\n      } else {\n        //primamo samo Bearer tokene\n        //jwt.verify provjerava potpis\n        //nakon dekodiranja tokena spremamo te podatke uz request\n        req.jwt = _jsonwebtoken[\"default\"].verify(token, process.env.JWT_SECRET);\n        return next();\n      }\n    } catch (e) {\n      return res.status(401).send();\n    }\n  }\n};\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0IiwiZGIiLCJjb2xsZWN0aW9uIiwiY3JlYXRlSW5kZXgiLCJ1c2VybmFtZSIsInVuaXF1ZSIsInJlZ2lzdGVyVXNlciIsInVzZXJEYXRhIiwiY29uc29sZSIsImxvZyIsImJjcnlwdCIsImhhc2giLCJwYXNzd29yZCIsImRvYyIsImluc2VydE9uZSIsInJlc3VsdCIsImluc2VydGVkSWQiLCJjb2RlIiwiRXJyb3IiLCJhdXRoZW50aWNhdGVVc2VyIiwiZmluZE9uZSIsInVzZXIiLCJjb21wYXJlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJhbGdvcml0aG0iLCJleHBpcmVzSW4iLCJjaGFuZ2VVc2VyUGFzc3dvcmQiLCJvbGRfcGFzc3dvcmQiLCJuZXdfcGFzc3dvcmQiLCJuZXdfcGFzc3dvcmRfaGFzaGVkIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsIm1vZGlmaWVkQ291bnQiLCJ2ZXJpZnkiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aG9yaXphdGlvbiIsImhlYWRlcnMiLCJzcGxpdCIsInR5cGUiLCJzdGF0dXMiLCJzZW5kIiwiZSJdLCJzb3VyY2VSb290IjoiQzpcXFdBLXByb2pla3RcXGJhY2tlbmRcXHNyY1xcIiwic291cmNlcyI6WyJhdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nbyBmcm9tICdtb25nb2RiJ1xyXG5pbXBvcnQgY29ubmVjdCBmcm9tICcuL2RiLmpzJ1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCdcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXHJcblxyXG4vL2RhIGplZGFuIGtvcmlzbmlrIG5lIGJpIG1vZ2FvIGltYXRpIHZpxaFlIHJlZ2lzdHJhY2lqYSBcclxuLy96Ym9nIHRvZ2Ega3JlaXJhbW8gaW5kZXggbmEgdXNlcm5hbWVcclxuKGFzeW5jKCkgPT4ge1xyXG4gICAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpXHJcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuY3JlYXRlSW5kZXgoIHt1c2VybmFtZTogMX0sIHt1bmlxdWU6IHRydWV9KVxyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgLy9mdW5rY2lqYSB6YSByZWdpc3RyYWNpanVcclxuICAgIC8vdXNlckRhdGEgc3UgcG9kYWNpIGtvamkgZG9sYXplIHNhIGZyb250ZW5kLWFcclxuICAgIGFzeW5jIHJlZ2lzdGVyVXNlcih1c2VyRGF0YSkgeyBcclxuICAgICAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcclxuICAgICAgICAvL3NwYWphbmplIG5hIGJhenVcclxuICAgICAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KClcclxuXHJcbiAgICAgICAgbGV0IGRvYyA9IHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lLCAvL3VzZXJuYW1lIHNwcmVtYW1vIG9uYWt2b2cga2FrbyBnYSBqZSBrb3Jpc25payB1cGlzYW9cclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGJjcnlwdC5oYXNoKHVzZXJEYXRhLnBhc3N3b3JkLCA4KSwgLy9wYXNzd29yZCBzcHJlbWFtbyBwb21vxId1IGhhc2ggZGEgxaFpZnJhIGtvcmlzbmlrYSBidWRlIGtyaXB0aXJhbmFcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHsgLy9ha28gamUgc3ZlIHByb8WhbG8gdSByZWR1XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuaW5zZXJ0T25lKGRvYylcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5pbnNlcnRlZElkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Lmluc2VydGVkSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2goZSkgeyAvL2FrbyB2ZcSHIHBvc3Rvamkga29yaXNuaWtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PSAxMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiS29yaXNuaWsgdmXEhyBwb3N0b2ppXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9mdW5rY2lqYSB6YSBhdXRlbnRpZmlrYWNpanVcclxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgLy9zcGFqYW5qZSBuYSBiYXp1XHJcbiAgICAgICAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpXHJcbiAgICAgICAgLy9zYSBmaW5kT25lIHRyYcW+aW1vIGRva3VtZW50IHBvIGF0cmlidXR1IHVzZXJuYW1lIGkgdG8gcHJlbWEgdXNlcm5hbWUtdSBrb2plZyBzbW8gZG9iaWxpXHJcbiAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7dXNlcm5hbWU6IHVzZXJuYW1lfSlcclxuXHJcbiAgICAgICAgLy9ha28gcG9zdG9qaSBkb2t1bWVudCwgYWtvIGltYSBwYXNzd29yZCBpIGFrbyBqZSBwYXNzd29yZCB1IGJhemkgaXN0aSBrYW8gdXBpc2FuaSBwYXNzd29yZFxyXG4gICAgICAgIC8vYmNyeXB0LmNvbXBhcmUgdXNwb3JlxJF1amUgbG96aW5rZVxyXG4gICAgICAgIGlmKHVzZXIgJiYgdXNlci5wYXNzd29yZCAmJiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdXNlci5wYXNzd29yZFxyXG4gICAgICAgICAgICBsZXQgdG9rZW4gPSBqd3Quc2lnbih1c2VyLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7XHJcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IFwiSFM1MTJcIixcclxuICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogXCIxIHdlZWtcIiAvL3RyYWphbmplIHRva2VuYVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYXV0aGVudGljYXRlXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vbWV0b2RhIHphIHByb21qZW51IGxvemlua2VcclxuICAgIGFzeW5jIGNoYW5nZVVzZXJQYXNzd29yZCh1c2VybmFtZSwgb2xkX3Bhc3N3b3JkLCBuZXdfcGFzc3dvcmQpIHtcclxuICAgICAgICAvL3NwYWphbmplIG5hIGJhenVcclxuICAgICAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgICAgICAgLy90cmHFvmltbyBkYSBsaSB0YWoga29yaXNuaWsgcG9zdG9qaSB1IGJhemkgXCJ1c2Vyc1wiXHJcbiAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7dXNlcm5hbWU6IHVzZXJuYW1lfSlcclxuICAgICAgICAvL2FrbyB0YWoga29yaXNuaWsgcG9zdG9qaSwgaW1hIGRlZmluaXJhbnUgbG96aW5rdSwgdGUgc2UgdnLFoWkgcHJvdmplcmEgZGEgbGkgamUgc3RhcmEgbG96aW5rYSBrb2p1IGplIG9uIHBvc2xhbyBpc3RhIGthbyBsb3ppbmthIHUgYmF6aVxyXG4gICAgICAgIGlmKHVzZXIgJiYgdXNlci5wYXNzd29yZCAmJiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUob2xkX3Bhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkpIHtcclxuICAgICAgICAgICAgLy9zcHJlbWFtbyBub3Z1IGxvemlua3UgKGlzdG8gc3ByZW1hbW8ga3JpcHRpcmFudSlcclxuICAgICAgICAgICAgbGV0IG5ld19wYXNzd29yZF9oYXNoZWQgPSBhd2FpdCBiY3J5cHQuaGFzaChuZXdfcGFzc3dvcmQsIDgpXHJcbiAgICAgICAgICAgIC8vbWlqZW5qYW1vIGplZGFuIHphcGlzXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxyXG4gICAgICAgICAgICAgICAge19pZDogdXNlci5faWR9LCAvL2lkIGtvcmlzbmlrYSBpeiBiYXplXHJcbiAgICAgICAgICAgICAgICB7ICRzZXQ6IHtwYXNzd29yZDogbmV3X3Bhc3N3b3JkX2hhc2hlZH19IC8vbWlqZW5qYW5qZSBsb3ppbmtlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5tb2RpZmllZENvdW50ID09IDFcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9wcm92amVyYSB0b2tlbmFcclxuICAgIC8vbmV4dCBrb3Jpc3RpbW8gamVyIG1pZGRsZXdhcmUgZnVua2NpamEgbW/FvmUgYml0aSB2acWhZSwgdGUgbW9yYSBwb3p2YXRpIG5leHQgZGEgYmkgc2Ugb3N0YXRhayBmdW5rY2lqZSBpc3B1bmlvXHJcbiAgICB2ZXJpZnkocmVxLCByZXMsIG5leHQpIHsgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAvL2l6dmxhxI1pbW8gdG9rZW4gKGlsaSBwb3RwaXM/KVxyXG4gICAgICAgIGxldCBhdXRob3JpemF0aW9uID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpXHJcbiAgICAgICAgbGV0IHR5cGUgPSBhdXRob3JpemF0aW9uWzBdIC8vdGlwIHRva2VuYVxyXG4gICAgICAgIGxldCB0b2tlbiA9IGF1dGhvcml6YXRpb25bMV0gLy90b2tlblxyXG4gICAgICAgIGlmICh0eXBlICE9PSBcIkJlYXJlclwiKSB7IC8vYWtvIG5pamUgQmVhcmVyIHRva2VuXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgeyAvL3ByaW1hbW8gc2FtbyBCZWFyZXIgdG9rZW5lXHJcbiAgICAgICAgICAgIC8vand0LnZlcmlmeSBwcm92amVyYXZhIHBvdHBpc1xyXG4gICAgICAgICAgICAvL25ha29uIGRla29kaXJhbmphIHRva2VuYSBzcHJlbWFtbyB0ZSBwb2RhdGtlIHV6IHJlcXVlc3RcclxuICAgICAgICAgICAgcmVxLmp3dCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0KClcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoKVxyXG4gICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OzsrQ0FGQSxvSjs7Ozs7O0FBSUE7QUFDQTtBQUNBLDJEQUFDO0VBQUE7RUFBQTtJQUFBO01BQUE7UUFBQTtVQUFBO1VBQUEsT0FDa0IsSUFBQUEsY0FBQSxHQURsQjs7UUFBQTtVQUNPQyxFQURQO1VBQUE7VUFBQSxPQUVTQSxFQUFFLENBQUNDLFVBQUgsQ0FBYyxPQUFkLEVBQXVCQyxXQUF2QixDQUFvQztZQUFDQyxRQUFRLEVBQUU7VUFBWCxDQUFwQyxFQUFtRDtZQUFDQyxNQUFNLEVBQUU7VUFBVCxDQUFuRCxDQUZUOztRQUFBO1FBQUE7VUFBQTtNQUFBO0lBQUE7RUFBQTtBQUFBLENBQUQ7O2VBS2U7RUFDWDtFQUNBO0VBQ01DLFlBSEssd0JBR1FDLFFBSFIsRUFHa0I7SUFBQTtNQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7Y0FDekJDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixRQUFaLEVBRHlCLENBRXpCOztjQUZ5QjtjQUFBLE9BR1YsSUFB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","map":{"version":3,"names":["connect","db","collection","createIndex","username","unique","registerUser","userData","console","log","bcrypt","hash","password","doc","insertOne","result","insertedId","code","Error","authenticateUser","findOne","user","compare","token","jwt","sign","process","env","JWT_SECRET","algorithm","expiresIn","changeUserPassword","old_password","new_password","new_password_hashed","updateOne","_id","$set","modifiedCount","verify","req","res","next","authorization","headers","split","type","status","send","e"],"sourceRoot":"C:\\WA-projekt\\backend\\src\\","sources":["auth.js"],"sourcesContent":["import mongo from 'mongodb'\r\nimport connect from './db.js'\r\nimport bcrypt from 'bcrypt'\r\nimport jwt from 'jsonwebtoken'\r\n\r\n//da jedan korisnik ne bi mogao imati više registracija \r\n//zbog toga kreiramo index na username\r\n(async() => {\r\n    let db = await connect()\r\n    await db.collection(\"users\").createIndex( {username: 1}, {unique: true})\r\n})();\r\n\r\nexport default {\r\n    //funkcija za registraciju\r\n    //userData su podaci koji dolaze sa frontend-a\r\n    async registerUser(userData) { \r\n        console.log(userData)\r\n        //spajanje na bazu\r\n        let db = await connect()\r\n\r\n        let doc = {\r\n            username: userData.username, //username spremamo onakvog kako ga je korisnik upisao\r\n            password: await bcrypt.hash(userData.password, 8), //password spremamo pomoću hash da šifra korisnika bude kriptirana\r\n        }\r\n        try { //ako je sve prošlo u redu\r\n            let result = await db.collection(\"users\").insertOne(doc)\r\n            console.log(result)\r\n            if (result && result.insertedId) {\r\n                return result.insertedId\r\n            }\r\n        } catch(e) { //ako već postoji korisnik\r\n            if (e.code == 11000) {\r\n                throw new Error(\"Korisnik već postoji\")\r\n            }\r\n        }\r\n    },\r\n    //funkcija za autentifikaciju\r\n    async authenticateUser(username, password) {\r\n        //spajanje na bazu\r\n        let db = await connect()\r\n        //sa findOne tražimo dokument po atributu username i to prema username-u kojeg smo dobili\r\n        let user = await db.collection(\"users\").findOne({username: username})\r\n\r\n        //ako postoji dokument, ako ima password i ako je password u bazi isti kao upisani password\r\n        //bcrypt.compare uspoređuje lozinke\r\n        if(user && user.password && (await bcrypt.compare(password, user.password))) {\r\n            delete user.password\r\n            let token = jwt.sign(user, process.env.JWT_SECRET, {\r\n                algorithm: \"HS512\",\r\n                expiresIn: \"1 week\" //trajanje tokena\r\n            })\r\n            return {\r\n                token,\r\n                username: user.username\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Cannot authenticate\")\r\n        }\r\n    },\r\n    //metoda za promjenu lozinke\r\n    async changeUserPassword(username, old_password, new_password) {\r\n        //spajanje na bazu\r\n        let db = await connect();\r\n        //tražimo da li taj korisnik postoji u bazi \"users\"\r\n        let user = await db.collection(\"users\").findOne({username: username})\r\n        //ako taj korisnik postoji, ima definiranu lozinku, te se vrši provjera da li je stara lozinka koju je on poslao ista kao lozinka u bazi\r\n        if(user && user.password && (await bcrypt.compare(old_password, user.password))) {\r\n            //spremamo novu lozinku (isto spremamo kriptiranu)\r\n            let new_password_hashed = await bcrypt.hash(new_password, 8)\r\n            //mijenjamo jedan zapis\r\n            let result = await db.collection(\"users\").updateOne(\r\n                {_id: user._id}, //id korisnika iz baze\r\n                { $set: {password: new_password_hashed}} //mijenjanje lozinke\r\n            )\r\n            return result.modifiedCount == 1\r\n        }\r\n    },\r\n    //provjera tokena\r\n    //next koristimo jer middleware funkcija može biti više, te mora pozvati next da bi se ostatak funkcije ispunio\r\n    verify(req, res, next) { \r\n        try {\r\n        //izvlačimo token (ili potpis?)\r\n        let authorization = req.headers.authorization.split(' ')\r\n        let type = authorization[0] //tip tokena\r\n        let token = authorization[1] //token\r\n        if (type !== \"Bearer\") { //ako nije Bearer token\r\n            return res.status(401).send()\r\n        }\r\n        else { //primamo samo Bearer tokene\r\n            //jwt.verify provjerava potpis\r\n            //nakon dekodiranja tokena spremamo te podatke uz request\r\n            req.jwt = jwt.verify(token, process.env.JWT_SECRET)\r\n            return next()\r\n        }\r\n    } catch(e) {\r\n        return res.status(401).send()\r\n    }\r\n    }\r\n}"],"mappings":"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"}},"mtime":1661285905933}}